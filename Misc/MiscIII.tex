\documentclass[12pt]{article}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
}

\usepackage{import}
\import{"../Algebraic Geometry/"}{AlgGeoCommands}

\newcommand{\Loc}[1]{\mathfrak{Loc}\left( #1 \right)}
\newcommand{\AbGrp}{\mathbf{AbGrp}}

\begin{document}

\section{TODO!!}

\begin{enumerate}
\item Finish symplectic geometry course
\begin{enumerate}
\item figure out if symplectic toric is the same as projective toric variety (projectivity needed to come from a polytope and also to be Kahler)
\item review coisotropic reduced and write some notes
\item hyperkahler reduction examples 
\item are there examples of noncompact hyperkahlers?
\item work out the kinks in notes on hamiltonian actions
\end{enumerate}
\item review killing homotopy groups columbia lectures and write some notes
\item figure out those damn jet bundles and connections on principal bundles
\begin{enumerate}
\item RMK: $\pi^* E$ is NOT trivial for a vector bundle let alone a fiber bundle. it does get equiped with a canonical section but for a vector bundle this is just the trivial section, only for a principal bundle does giving a section trivialize it.
\item role of atiyah sequence vs jet bundle sequence
\item 
\end{enumerate}
\item spectral sequences for tor and ext in derived category (FIND MY NOTES ON THIS!)
\begin{enumerate}
\item application to universal coefficient theorem
\item Kunneth spectral sequence
\item Kunneth formula for smash product?
\item why are derived functors triangulated
\item derived functors in terms of Kan extensions (NOTES)
\end{enumerate}
\item write notes on universal morphisms
\item $G$-action of $X/Y$ induces map Descent data $X/Y$ to $G$-equivariant sheaves
\begin{enumerate}
\item isomorphism when $X/Y$ is a $G$-cover i.e. $X \to Y$ is a $G$-torsor
\item write down explicit $G$-equivariant structure on $\Omega_X$
\item Galois descent derive explicit form
\end{enumerate}
\item Weil restriction
\begin{enumerate}
\item write down trivialization after going back up
\item Galois descent in explicit form
\end{enumerate}
\item notes on Galois actions on schemes
\item notes on Frobenii
\item notes on universal constructions in math with examples

\item fix notes on Tor in category of sheaves and Tor symmetry (do I need symmetry of flat objects a priori?).

\item Finish stable homotopy theory course.

\item Finish vector bundles and connections notes (in AG folder)
\begin{enumerate}
\item Kahler iff $\nabla I = 0$ where $\nabla$ is the Levi-Civita connection
\item Ricci tensor and the trace bullshit 
\item Riemann-Hilbert and existence of flat frames for integrable connections
\end{enumerate}
\end{enumerate}

\section{What I Want to Think About}

\begin{enumerate}
\item Flat cohomology equal etale cohomology for smooth (affine groups) apply this to that counting rational points things
\item work out the details for the group fixing $\CC$ inside endomorphism group. What does an integrable structure of this kind look like, how close to a complex manifold can we get? In dimension two this should be exactly a conformal (not necessarily orientable) structure. 
\item FINISH CONFORMAL NOTES!
\item Hilbert Class Field of curves (ASK BRIAN FOR REFERENCE)
\item Read about Fredholm index and Riemann-Roch
\item Cohmology and inclusion-exclusion: cohomology for vectorspaces?
\end{enumerate}

\section{Some Questions I Have}

\begin{enumerate}
\item Reduction of structure group for a scheme.
\begin{enumerate}
\item what about the algebraic group $\mathrm{SL}^{\pm} = \det^{-1}(\mu)$ what does reduction of structure group give. For a manifold this is supposed to be a pseudo-volume form but obviously that's not right.
\item what about $\Res{\CC}{\RR}{\Gm} \embed \mathrm{GL}_2$ from the action $\Gm \acts \A^1_{\CC}$ restricted giving an action $\Res{\CC}{\RR} \Gm \acts \A^2_{\RR}$. I feel like this should give an almost complex structure. What properties does it have? What about for other fields?
\item What is an almost complex structure on a scheme look like?
\end{enumerate}
\item Is my calculation of an ``almost almost complex structure'' as reduction of structure group to $\left< \sigma \right> \ltimes \mathrm{GL}(n, \CC) \subset \mathrm{GL}(2n, \RR)$. For the case $n = 1$ this should be the conformal group justfying that I think this should correspond to the non-oriented case of a complex manifold since Riemann surfaces are exactly oriented conformal manifolds.
\end{enumerate}

\section{The Tautological Bundle}

\renewcommand{\C}{\mathbb{C}}
\newcommand{\Span}[1]{\mathrm{Span}\left( #1 \right)}

Consider the fibre bundle, $\pi : S^{2 n + 1} \to \P^n_{\C}$ given by consider ing $S^{2n +1} \subset \C^{n+1}$ and restricting the projection $\C^{n+1} \to \P^n_\C$. Then $\pi$ is a principal $S^1$-bundle. Consider the tautological representation $\rho : U(1) \to \mathrm{GL}_1(\C)$ which is the inclusion $U(1) \embed \C^\times$, which gives an associated line bundle $S^{2 n + 1} \times_\rho \C$. We call this the tautological bundle since its fibre above a point is the line in $\C^{n+1}$ which that point on $\P^n_\C$ corresponds to.
\bigskip\\
To see this explicitly, consider the following bundle,
\[ T = \{ (L, v) \mid L \in \P^n_\C \textrm{ and } v \in L \subset \C^{n+1} \} \subset \P^n_\C \times \C^{n+1} \]
with the projection $\pi : T \to \P^n_\C$ via $(L, v) \mapsto L$. I claim that this bundle is isomorphic to the tautological bundle constructed above. 
\bigskip\\
Consider the map $f : S^{2n + 1} \times_\rho \C \to T$ via $f : [x, \lambda] \mapsto ( \mathrm{Span}(x), \lambda x)$. This is clearly a bundle map since $\pi([x, \lambda]) = \pi(x) = \Span(x) = \pi(\Span{x}, \lambda x)$. Furthermore it is well-defined because $f([x, \mu \lambda]) = (\Span{x}, \mu \lambda x) = (\Span{\mu x}, \lambda \mu x) = f([\mu x, \lambda])$. We need to check that this map is injective and surjective. First, if $f([x, \lambda]) = f([y, \mu])$ then $\Span{x} = \Span{y}$ so $y = \gamma x$ for $\gamma \in \C^\times$ and $\lambda x = \mu y$ so $\lambda = \mu \gamma$ (since these vectors are nonzero) and thus,
\[ [x, \lambda] = [x, \gamma \mu] = [\gamma x, \mu] = [y, \mu] \]
For surjectivity note that given $(L, v)$ with $v \in L$ then $L = \Span{x}$ for $x \in S^{2n + 1}$ and $v = \lambda x$ with $\lambda \in \C$ since $L$ is a line. Thus $f([x, \lambda]) = (L, v)$. 
\bigskip\\
The tautological bundle has no nonzero (holomorphic) global sections.   However, there are $n+1$ independent glboal sections of its dual. To see this consder the global $\mathrm{Hom}(T, \mathcal{O}_\P)$. There exist $n+1$ idependent functions defined by the $n+1$ projections $p_k : \C^{n+1} \to \C$ via the construction, 
\[ T \embed \mathcal{O}^{n+1}_\P = \P^n_\C \times \C^{n+1} \xrightarrow{p_k} \P^n_\C \times \C = \mathcal{O}_\P \]
These sections are refered to as $X_k$ ,the $k^{\mathrm{th}}$ coordinate function on $\P^n_\C$.
\bigskip\\
Producing the coordinate functions $X_k$ as sections of the dual $X^\vee$ identifies the tautological bundle $T$ with the algebraic twist $\mathcal{O}_\P(-1)$ and thus its dual is the Serre twisting sheaf $T^\vee = \mathcal{O}_\P(1)$. 

\renewcommand{\C}{\mathcal{C}}

\section{MATH 275A 2021 Lecture 2}

\newcommand{\ket}[1]{\left| #1 \right>}
\newcommand{\bra}[1]{\left< #1 \right|}

Using the Stern-Gerlach boxes we define spin operators $\hat{S}_i$ on our Hilbert space $H = \C^2$. These have eigenstate $\ker{\pm}$ along each axis. Furthermore, we have a Hamiltonian $\hat{H}$. For a constant magnetic field, up to a constant,
\[ \hat{H} = \hat{S} \cdot \vec{B} \]
For $B$ along the $z$-direction,
\[ \hat{H} = \hat{S}_z B \]
Then the evolution follows the Schrodinger equation,
\[ i \partial_t \ket{\psi} = \hat{H} \ket{\psi} \]
For any observable (i.e. operator $\hat{A}$) we can define the expected value,
\[ \left< \hat{A} \right>_\psi = \bra{\psi} \hat{A} \ket{\psi} \]
Then,
\[ i \partial_t \left< \hat{A} \right>_\psi= \left< [\hat{A}, \hat{H}] \right>_{\psi} \]
Now for example, we choose $\ket{\psi(0)} = \ket{+_x}$. Then we expand,
\[ \ket{\psi(0)} = \frac{1}{\sqrt{2}} \left( \ket{+_z} + \ket{-_z} \right) \]
Then applying the evolution operator,
\[ \ket{\psi(t)} = e^{-i H t} \frac{1}{\sqrt{2}} \left( \ket{+_z} + \ket{-_z} \right) = \frac{1}{\sqrt{2}} \left( e^{-i \frac{B}{2}t} \ket{+_z} + e^{i \frac{B}{2}t} \ket{-_z} \right) \]
Now we consider,
\[ i \partial_t \left< \hat{S}_x \right> = \bra{\psi} \hat{S}_x \ket{\psi} = \left< [\hat{S}_x, \hat{H}] \right> = B \left< [\hat{S}_x, \hat{S}_z] \right> = - i B \hat{S}_y \]
and therefore,
\[ \partial_t \left< \hat{S}_x \right> = - B \left< \hat{S}_y \right> \]
Likewise,
\[ \partial_t \left< \hat{S}_y \right> = B \left< \hat{S}_x \right> \]
This coupled system has solution,
\[ \left< \hat{S}_x \right> = \cos{(B t)} \quad \text{and} \quad \left< \hat{S}_y \right> = \sin{(B t)} \]

\subsubsection{Operators}

\newcommand{\R}{\mathbb{R}}

Infinite dimensional space $H = L^2(\R) = \{ f : \R \to \C \mid \int |f|^2 < \infty \}$. We take observables to be ``self-adjoint'' operators on $H = L^2(\R)$. For example, $\hat{x} = x \cdot$ and $\hat{p} = - \partial_x$. However, the eigenfunctions of these operators are not $L^2$ they are tempered distributions. We say,
\[ \left< \frac{1}{\sqrt{2\pi}} e^{i p x} \middle| \frac{1}{\sqrt{2\pi}} e^{i q x} \right> = \nabla(p - q) \]

\subsubsection{Uncertainty Principle}
Define,
\[ \nabla \hat{A} = \hat{A} = - \left< \hat{x} \right> I \]
and likewise for $B$ two self-adjoint operators $A, B$. Then,
\[ \left< (\nabla \hat{x})^2 \right>_\psi \left< (\nabla \hat{p})^2 \right>_\psi \ge \frac{1}{4} \left| \bra{\psi} [\hat{A}, \hat{B}] \ket{\psi} \right|^2 \]
\bigskip\\
For example,
\[ [\hat{x}, \hat{p}] = \hat{x} \hat{p} - \hat{p} \hat{x} = i I \]
because,
\[ (\hat{x} \hat{p} - \hat{p} \hat{x}) \psi = x (-i \partial_x \psi) + i \partial_x (x \psi) = - i \partial_x \psi + i \psi + x \partial_x \psi = i \psi \]
Therefore,
\[ \sigma_x^2 \sigma_p^2 \ge \frac{1}{4} \]

\subsubsection{Angular Momentum}

Classical angular momentum $\vec{L} = \vec{x} \times \vec{p}$. We upgrade these to quantum self-adjoint operators. Thus we get, for example,
\[ \hat{L}_z = - i (x \partial_y - y \partial_x) \]
Then $L^2 = L_x^2 + L_y^2 + L_z^2$.  

\section{The Tautological Bundle}

\renewcommand{\C}{\mathbb{C}}

Consider the fibre bundle, $\pi : S^{2 n + 1} \to \P^n_{\C}$ given by consider ing $S^{2n +1} \subset \C^{n+1}$ and restricting the projection $\C^{n+1} \to \P^n_\C$. Then $\pi$ is a principal $S^1$-bundle. Consider the tautological representation $\rho : U(1) \to \mathrm{GL}_1(\C)$ which is the inclusion $U(1) \embed \C^\times$, which gives an associated line bundle $S^{2 n + 1} \times_\rho \C$. We call this the tautological bundle since its fibre above a point is the line in $\C^{n+1}$ which that point on $\P^n_\C$ corresponds to.
\bigskip\\
To see this explicitly, consider the following bundle,
\[ T = \{ (L, v) \mid L \in \P^n_\C \textrm{ and } v \in L \subset \C^{n+1} \} \subset \P^n_\C \times \C^{n+1} \]
with the projection $\pi : T \to \P^n_\C$ via $(L, v) \mapsto L$. I claim that this bundle is isomorphic to the tautological bundle constructed above. 
\bigskip\\
Consider the map $f : S^{2n + 1} \times_\rho \C \to T$ via $f : [x, \lambda] \mapsto ( \mathrm{Span}(x), \lambda x)$. This is clearly a bundle map since $\pi([x, \lambda]) = \pi(x) = \Span(x) = \pi(\Span{x}, \lambda x)$. Furthermore it is well-defined because $f([x, \mu \lambda]) = (\Span{x}, \mu \lambda x) = (\Span{\mu x}, \lambda \mu x) = f([\mu x, \lambda])$. We need to check that this map is injective and surjective. First, if $f([x, \lambda]) = f([y, \mu])$ then $\Span{x} = \Span{y}$ so $y = \gamma x$ for $\gamma \in \C^\times$ and $\lambda x = \mu y$ so $\lambda = \mu \gamma$ (since these vectors are nonzero) and thus,
\[ [x, \lambda] = [x, \gamma \mu] = [\gamma x, \mu] = [y, \mu] \]
For surjectivity note that given $(L, v)$ with $v \in L$ then $L = \Span{x}$ for $x \in S^{2n + 1}$ and $v = \lambda x$ with $\lambda \in \C$ since $L$ is a line. Thus $f([x, \lambda]) = (L, v)$. 
\bigskip\\
The tautological bundle has no nonzero (holomorphic) global sections.   However, there are $n+1$ independent glboal sections of its dual. To see this consder the global $\mathrm{Hom}(T, \mathcal{O}_\P)$. There exist $n+1$ idependent functions defined by the $n+1$ projections $p_k : \C^{n+1} \to \C$ via the construction, 
\[ T \embed \mathcal{O}^{n+1}_\P = \P^n_\C \times \C^{n+1} \xrightarrow{p_k} \P^n_\C \times \C = \mathcal{O}_\P \]
These sections are refered to as $X_k$ ,the $k^{\mathrm{th}}$ coordinate function on $\P^n_\C$.
\bigskip\\
Producing the coordinate functions $X_k$ as sections of the dual $X^\vee$ identifies the tautological bundle $T$ with the algebraic twist $\mathcal{O}_\P(-1)$ and thus its dual is the Serre twisting sheaf $T^\vee = \mathcal{O}_\P(1)$. 

\renewcommand{\C}{\mathcal{C}}

\section{Some Connection Musings}

\begin{defn}
Let $f : E \to X$ be a smooth surjection (in the smooth category, what should it be in the algebraic category?) then an \textit{Erhesmann connection} is a  splitting of the sequence of vector bundles,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \ker{\d{f}} \arrow[r] & TE \arrow[r] & \pi^* TX \arrow[r] & 0
\end{tikzcd}
\end{center}
where we usually call $V = \ker{d{f}}$ the vertical bundle. In algebraic language, $V$ is the dual of the relative differentials so the connection corresponds to a splitting of,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & f^* \Omega_X \arrow[r] & \Omega_E \arrow[r] & \Omega_{E/X} \arrow[r] & 0
\end{tikzcd}
\end{center}
\end{defn}

\begin{rmk}
Such splittings are supposed to correspond to smooth sections of the map $J^1(E) \to E$. We now explain how this works. Unfortunately, I don't know a good unified language to describe the jet bundles so I will give the algebraic and smooth definitions.
\end{rmk}

\begin{defn}
Given a smooth surjection $f : E \to X$, consider the $n$-th thickened diagonal, $X \to X_n \to X \times_S X$. Then we consider the functor sending $T \to S$ to pairs of maps $T \to X$ and $T \times_X X_n \to E$ such that the diagram,
\begin{center}
\begin{tikzcd}
E \arrow[r, "f"] & X
\\
T \times_X X_n \arrow[u] \pullback \arrow[d] \arrow[r] & X_n \arrow[d, "\pi_2"] \arrow[u, "\pi_1"']
\\
T \arrow[r] & X
\end{tikzcd}
\end{center}
commutes. Then the jet scheme $J_n(E/X)$ with maps $J_n(E/X) \to X$ and $J^n(E/X) \times_X X_n \to E$ represents this functor.
\end{defn}

\section{Counterexamples In Geometry}

\begin{example}
The Hopf surface is the compact complex surface $H = \CC^2 \setminus \{ 0 \} / \Z$ where $\Z \acts \CC^2$ via $(z_1, z_2) \mapsto  (\lambda z_1, \lambda z_2)$ for $0 < \lambda < 1$. This surface has $h^{1,0} = 1$ but $h^{0,1} = 0$. Furthermore, $H$ is diffeomorphic to $S^3 \times S^1$. This provides:
\begin{enumerate}
\item a compact complex manifold that is not K\"{a}hler
\item a compact complex manifold without Hodge symmetry 
\item a compact complex manifold that is not symplectic ($H^2(H, \Z) = 0$)
\end{enumerate}
\end{example}

\begin{rmk}
From the exponential exact sequences,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \Z \arrow[r] & \struct{X} \arrow[r, "\exp"] & \struct{X}^\times \arrow[r] & 0
\end{tikzcd}
\end{center}
we have that,
\begin{center}
\begin{tikzcd}

\end{tikzcd}
\end{center}
\end{rmk}

\section{Questions I was asked in interviews}

\subsection{Oxford}

\begin{exercise}
Which genus Riemann surfaces have a covering map to a genus $2$ Riemann surface.
\end{exercise}

From Riemann-Hurwitz we have have $2 g - 2 = 2 n$ where $2h - 2 = 2$ since $h = 2$. Thus $g = n + 1$ so any genus can appear. To show that these are all actually possible, draw a picture with a central donut surrounded by $g-1$ donuts. This maps by cyclic quotienting onto a two holed torus.

\subsection{LSGNT}

\begin{exercise}
Let $E$ be an elliptic cuve over $\FF_p$. Given $a_p$ how do you find $\# E(\FF_{p^k})$?
\end{exercise}
\noindent
The zeta function is,
\[ \zeta_E(t) = \frac{t^2 - a_p t + p}{(1 - t)(1 - p t)} \]
and therefore,
\[ \# E(\FF_{p^k}) = 1 + p^k - \alpha^k - \beta^k \]
where $\alpha$ and $\beta$ are the roots of $t^2 - a_p t + p$ which are determined via $\alpha + \beta = a_p$ and $\alpha \beta = p$.

\section{Questions}

\newcommand{\h}{\mathfrak{h}}

\begin{enumerate}
\item When people write $\M_{\ell}(\CC) = \h // \SL{2}{\Z}$ isn't this wrong because every point of $\M_{\ell}(\CC)$ is ``stacky'' i.e. this groupoid has $\Z / 2\Z$ stabilizer at the general point due to the inversion map. However, $\h // \SL{2}{\Z}$ seems to be a setoid at the general point, oh no that's wrong because $-I$ satabilizes each point and stabilizes a lattice but acts on the elliptic curve by inversion. AHH!!! This is why we retain the $\SL{2}{\Z}$ and don't pass to $\PSL{2}{\Z}$.
\end{enumerate}

\section{The Universal Elliptic Curve and Modular Forms}

Let $\h$ be the upper half plane with coordinate $\tau$ which we think of as parametrizing the complex elliptic curve $\CC / (\Z \oplus \tau \Z)$. We first make a universal family of elliptic cuves by,
\[ \pi : \CC \times \h / \left< (z, \tau) \sim (z + 1, \tau) \sim (z + \tau, \tau) \right> \to \h \]
This map has fiber over $\tau$ equal to $\CC / (\Z \oplus \tau \Z)$. However, if $\gamma \in \SL{2}{\Z}$ takes $\gamma \cdot \tau = \tau'$ then I claim that the elliptic curves are isomorphic. We want to encode this. The ismorphism comes from the transformation of a positive ordered basis $\omega_1, \omega_2$ of a lattice into the form $\tau, 1$ where $\tau = \frac{\omega_1}{\omega_2}$. Then $\gamma \cdot \tau = \frac{a \tau + b}{c \tau + d}$ is the image of the basis $\tau, 1$ under $\gamma$ after dividing by $(c \tau + d)$ so that we are normalzied to $\gamma \cdot \tau, 1$. Therefore, the isomorphism $C_\tau \iso C_{\gamma \tau}$ is given by $z \mapsto (c \tau + d)^{-1} z$. Therefore, we mod out our family to get,
\[ \C \to \M \]
where $\M = \h / \SL{2}{\Z}$ and,
\begin{align*}
\C & = \CC \times \h / \left< (z, \tau) \sim (z + 1, \tau) \sim (z + \tau, \tau) \right> / \SL{2}{\Z} 
\\
& = \CC \times \h / \left< (z, \tau) \sim (z + 1, \tau) \sim (z + \tau, \tau) \sim ((c \tau + d)^{-1} z, \gamma \cdot \tau) \right>
\end{align*}
Now we consider the vertical cotangent bundle of $\C \to \M$ which is,
\[ \Omega_{\C/\M} = \CC \times \CC \times \h / \left< (\omega, z, \tau) \sim (\omega, z + 1, \tau) \sim (\omega, z + \tau, \tau) \sim ((c\tau + d) \omega, (c \tau + d)^{-1} z, \gamma \cdot \tau) \right> \]
Notice that the cotangent fibers change opposite to the coordinate $z$ because the natural forward map is the inverse pullback which scales oppositely. 
All this is extremely problematic because of the fixed points of $\SL{2}{\Z} \acts \h$ which give stabilizers and thus too much quotienting we really should be taking groupoid quotients and thus get ``stacky'' points but the functions in the two cases are basically the same because they reduce to being equivariant maps. 
Now pulling back this bundle along the zero section of $\C \to \M$ (i.e. the map $\tau \mapsto (0, \tau)$) gives,
\[ \omega = e^* \Omega_{\C/\M} = \CC \times \h / \left (\omega, \tau) \sim ((c \tau + d) \omega, \gamma \cdot \tau) \right> \]
Therefore, a section of $\omega \to \M$ is an equivariant section of $\CC \times \h \to \h$ and thus a function $f : \h \to \CC$ such that,
\[ f(\gamma \cdot \tau) = (c \tau + d) f(\tau) \]
which is exactly a weight-one modular function!. Therefore, modular functions of weight $k$ correspond to sections of $\omega^{\otimes k}$. 
\bigskip\\
To get modular forms, we need a holomorphy condition at $\infty$. To get this, we need to extend $\omega$ over the boundary to a line bundle on $\overline{\M}$. 


\section{How many nodes does a curve in $\P^3$ have when projected to $\P^2$}

Given a smooth curve $X \subset \P^3$ of genus $g$ we consider a general projection $\P^3 \rat \P^2$. Then $X$ gets a node at some point if the associated line itersects $X$ at multiple points. 


For a curve $X \subset \P^2$ consider the projection map $X \to \P^1$. This is ramified exactly at the points where a section $s \in \Gamma(\P^1, \struct{\P^1}(1))$ vanishes as well as its derivative on $X$. Thus we want to consider $J^1(\struct{X}(1))$ and the vanishing locus of a general section. But we don't want a general line, we want a general line that vanishes at a fixed point $p \in \P^2$. Call this linear system $V_p \subset \Gamma(\P^2, \struct{\P^1}(1))$. Then 

\section{Viewpoints on Cech Cohomology}

\newcommand{\fU}{\mathfrak{U}}
\newcommand{\cechH}{\check{H}}

\subsection{\cech Cohomology as the Cohomology of a Complex}

Let $(\C, \struct{})$ be a ringed site, $U \in \C$ and $\fU = \{ U_i \to U \}_{i \in I}$ be a cover of $U$. We set,
\[ U_{i_0, \dots, i_p} = U_{i_0} \times_U \cdots \times_U U_{i_p} \]

\begin{defn}
The \cech complex of a presheaf $\F$ on $\C$ is defined by terms,
\[ \check{C}^p(\fU, \F) = \prod_{i_0, \dots, i_p \in I} \F(U_{i_0, \dots, i_p}) \]
giving a complex,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \prod_{i_0 \in I} \F(U_i) \arrow[r, "\d"] & \prod_{i_0, i_1 \in I} \F(U_{i_0} \times_U U_{i_1}) \arrow[r, "\d"] & \cdots 
\end{tikzcd}
\end{center}
where,
\[ \d{(s)}_{i_0, \dots, i_{p+1}} = \sum_{j = 0}^{p+1} (-1)^j s_{i_0, \dots, \hat{i_j}, \dots i_{p+1}} |_{U_{i_0, \dots, i_{p+1}}} \]
This is a complex. Then the \cech cohomology is the cohomology of this complex,
\[ \cechH^p(\fU, \F) = H^p(\check{C}^p(\fU, \F)) \]
\end{defn}

\begin{prop}
Formation of the \cech complex is functorial,
\[ \check{C}^\bullet(\fU, -) : \mathbf{PSh}_{\struct{}} \to \mathbf{Ch}(\mathbf{Mod}_{\struct{}(U)}) \]
and therefore \cech cohomology is functorial,
\[ \check{H}^p(\fU, -) : \mathbf{PSh}_{\struct{}} \to \mathbf{Mod}_{\struct{}(U)} \]
\end{prop}

\begin{lemma}
If $\I$ is an injective presheaf then $\check{H}^p(\fU, \I) = 0$ for all $p > 0$.
\end{lemma}

\begin{proof}
FIND A GOOD PROOF (e.g. Tag 01EN).
\end{proof}

\begin{prop}
The functors $\check{H}^p(\fU, -) : \mathbf{PSh}_{\struct{}} \to \mathbf{Mod}_{\struct{}(U)}$ form  a universal $\nabla$-functor.
\end{prop}

\begin{proof}
Given an exact sequence of presheaves,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \F_1 \arrow[r] & \F_2 \arrow[r] & \F_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
we get an exact sequence of complexes,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \check{C}^\bullet(\fU, \F_1) \arrow[r] & \check{C}^\bullet(\fU, \F_2) \arrow[r] & \check{C}^\bullet(\fU, \F_3) \arrow[r] & 0
\end{tikzcd}
\end{center}
because taking sections of presheaves is exact and products are exact in the category of modules. The associated long exact sequnce gives the required connecting maps and exactness showing that $\check{H}^p(\fU, -)$ form a $\nabla$-functor. Futhermore, since $\mathbf{PSh}_{\struct{}}$ has enough injectives and $\check{H}^p(\fU, \I) = 0$ for $p > 0$ we see that $\check{H}^p(\fU, -)$ are effaceable and thus form a universal $\nabla$-functor. 
\end{proof}

\subsection{\cech Cohomology as a Canonical Resolution}

\subsection{\cech Cohomology as a Derived Functor on Presheaves}



Let $(\C, \struct{})$ be a ringed site, $U \in \C$ and $\fU = \{ U_i \to U \}_{i \in I}$ be a cover of $U$ then define the Cech sections functor,
\[ \check{H}^0(\fU, -) : \mathbf{PSh}_{\struct{X}} \to \mathbf{Mod}_{\struct{}(U)} \]
defined by,
\[ \F \mapsto \ker{\left( \prod_{i \in I} \F(U_i) \to \prod_{i,j \in I^2} \F(U_i \times_U U_j) \right)} \]
Consider the inclusion functor,
\[ \iota : \mathbf{Sh}_{\struct{}} \to \mathbf{PSh}_{\struct{X}} \]
Then there is a commutative diagram of functors,
\begin{center}
\begin{tikzcd}
\mathbf{PSh}_{\struct{X}} \arrow[rd, "\check{H}^0"'] \arrow[rr, "\iota"] &  &  \mathbf{Sh}_{\struct{X}} \arrow[dl, "\Gamma_U"]
\\
& \mathbf{Mod}_{\struct{}(U)}
\end{tikzcd}
\end{center}
Furthermore, $\iota$ is right-adjoint to sheafification which is exact and thus preserves injectives. Therefore, we can apply the Grothendieck spectral sequence to get,
\[ E_2^{p,q} = R^p \cechH^0(\fU, R^q \iota(\F)) \implies H^0(U, \F) \]
Furthermore, because $\Gamma_V$ is exact on presheaves, we see that,
\[ R^p \Gamma_V =  R^p (\Gamma_V \circ \iota) = \Gamma_V \circ R^p \iota  \]
and therefore,
\[ [(R^p \iota)(\F)](V) = \Gamma_V \circ (R^p \iota)(\F) = (R^p \Gamma_V)(\F) = H^p(V, \F) \]
Therefore $(R^p \iota)(\F)$ is the presheaf $V \mapsto H^p(V, \F)$ which we call $\cH^p(\F)$. Now I claim that the derived functor $R^p \cechH^0$ agrees with $\cechH^p$ defined earlier. Since $\cechH^0$ is left-exact, there are natural isomorphisms,
\[ \cechH^0 \iso R^0 \cechH^0 \] 
Furthermore, because $\cechH^p$ and $R^p \cechH$ are universal $\nabla$-functors, the above map extends to an isomorphism of $\nabla$-functors. Therefore, we derived the \cech to derived spectral sequence,
\[ E_2^{p,q} = \cechH^p(\fU, \cH^q(\F)) \implies H^{p+q}(U, \F) \]
Now, we define,
\[ \cechH^0(U, -) = \varinjlim_{\fU} \cechH^0(\fU, -) \]
Because covers form a filtered poset this filtered colimit is exact. Therefore,
\[ \cechH^p(U, -) := \varinjlim_{\fU} \cechH^p(\fU, -) = \varinjlim_{\fU} R^p \cechH^0(\fU, -) = R^p \varinjlim_{\fU} \cechH^0(\fU, -) \]
Furthermore, since $\cechH^0(\fU,-) \circ \iota = \Gamma_U$ for any cover we see that $\cechH^0(U,-) \circ \iota = \Gamma_U$. Therefore, applying the Grothendieck spectral sequence,
\[ E^{p,q}_2 = \cechH^p(U, \cH^q(\F)) \implies H^{p+q}(U, \F) \]

\subsection{The Degree $1$ Case}

By the locality of cohomology, for each $s \in H^q(V, \F)$ there exists a cover $\{ V_i \}$ of $V$ such that $s|_{V_i} = 0$ for each $i$ and therefore choosing a small enough refinement $\cechH^0(U, \cH^q(\F)) = 0$. Now consider the differentials $\d_r : E^{p,q}_r \to E^{p+r,q - r + 1}$ then for $(p,q) = (1,0)$ we see that $\d_r = 0$ for $r > 1$ because $(p+r, q-r+1) = (r+1, 1-r)$ is not first quadrant. Furthermore, if $(p+r,q-r+1) = (1,0)$ then $(p,q) = (1-r,r-1)$ is not first quadrant for $r > 1$ so $\d_r = 0$. Since $E^{0,1}_2 = 0$ we see that the $p + q = 1$ terms are converged at the $E_2$-page. Therefore, from the filtration we see that,
\[ \cechH^1(U, \F) = H^1(U, \F) \]
in vast generality.

\section{Orientibility versus Two-Sidedness}

In multivariable calculus when you learn about the divergence theorem you may be told ``this only works for orientable surfaces because you need to choose a normal vector to integrate over in order to compute the flux'' this is only true because the ambient $\RR^3$ is orientable. Furthermore, you are told that the M\"{o}bius strip is non-orientable because it only has one side but this is actually a feature of its embedding in $\RR^3$. In general, orientability, which is intrinsic, is not actually the concept being probed but rather two-sidedness, which is relative to the embedding.

\begin{defn}
Let $M$ be a manifold. Then an embedded submanifold $X \subset M$ is \textit{two-sided} if the normal bundle $N_M X$ is orientable.
\end{defn}

\begin{prop}
Suppose that $X \subset M$ has codimension $1$ then $X$ is two sided if and only if it admits a global nonvanishing normal vector field $v \in \Gamma(X, N_M X)$.
\end{prop}

\begin{proof}
The normal bundle $N_M X$ is a line bundle and thus is orientable if and only if it is trivial if and only if it admits a nonvanishing global section.
\end{proof}

\begin{rmk}
Thsi motives the terminology because the nonvanishing normal vector field distinguishes between a ``positive'' side and a ``negative'' side of the manifold.
\end{rmk}

\begin{prop}
If $M$ is orientable and $X \subset M$ is an embedded submanifold then $X$ is two-sided if and only if $M$ is orientable.
\end{prop}

\begin{proof}
From the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & TX \arrow[r] & TM|_X \arrow[r] & N_M X \arrow[r] & 0
\end{tikzcd}
\end{center}
we see that,
\[ \det{TM|_X} \cong \det{TX} \otimes \det{N_M X} \]
However, $TM$ is orientable so $\det{TM}$ is trivial and thus,
\[ \det{TM} \cong \det{N_M X} \]
menaing that one bundle is orientable if and only if the other is orientable. Equivalently, we can use Stiefel-Whitney classes,
\[ w_1(TX) + w_1(N_M X) = w_1(TM)|_X = 0 \]
and therefore (because these live in $\Z/2\Z$ cohomology),
\[ w_1(TX) = w_1(N_M X) \]
Furthermore, the Stiefel-Whitney classes vanish exactly when the bundle is orientable so we see that $TX$ is orientable if and only if $N_M X$ is orientable.
\end{proof}

\begin{rmk}
In general, we see that,
\[ w_1(N_M X) = w_1(TX) + w_1(TM)|_X \]
and therefore we can compute the two-sidedness from the orientability of $X$ together with the pullback of the Stiefel-Whitney class of $TM$.
\end{rmk}


\begin{rmk}
\href{https://www.jstor.org/stable/pdf/3026946.pdf}{This} paper gives lots of examples of non-orientable surfaces such a M\"{o}bius strips and Klien bottles with two-sided embeddings into non-orientable $3$-manifolds.
\end{rmk}

\section{Stable Parallelizability of Spheres}

\begin{prop}
Let $X$ be a $n$-dimensional oriented surface and $\iota : X \to \RR^{n+1}$ an immersion. Then $TX$ is stabily trivial.
\end{prop}

\begin{proof}
The canonical exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & TX \arrow[r] & \iota^* TY \arrow[r] & N_Y X \arrow[r] & 0
\end{tikzcd}
\end{center}
splits (every sequence splits) to give $\iota^* TY = TX \oplus N_Y X$ but $TY \cong \varepsilon^{n+1}$ is trivial. Because $X$ and $Y$ are orientable, the embedding $\iota : X \to Y$ is two-sided so $N_Y  X$ is orientable. However, $N_Y X$ is a line bundle since $\dim{Y} = \dim{X} + 1$ and thus $N_Y X$ is trivial. Therefore,
\[ T X \oplus \underline{\RR} \cong \underline{\RR}^{n+1} \]
and thus $TX$ is stably trivial so $X$ is stably parallelizable. 
\end{proof}

\begin{cor}
All spheres have stabily trivial tangent bundles in fact $T S^n \oplus \underline{\RR}$ is trivial.
\end{cor}

\begin{rmk}
This shows that $S^n \times \RR$ is parallelizable. For the case $n = 2$, this has to be true because it is a theorem of Thurston that every orientable $3$-manifold has trivial tangent bundle.
\end{rmk}

\section{Some Questions}

\subsection{Can I use Miracle Flatness at Only Closed Points}

\subsection{Do Regular Functions Separate Points}

Throughout we assume that $X$ is separated. Otherwise points of $X$ cannot be separated by rational functions let alone regular functions.
For simplicitly, we assume that $X$ is noetherian.
\bigskip\\
I can reduce to the case of an integral scheme as follows. First, if $X$ is nonreduced then $X_{\red} \to X$. Suppose that $X_{\red}$ separated points then any function mapping to it on $X$ will work. Now we assume $X$ is reduced. If $X$ is reducible then there are two cases to consider. If $x,y \in X$ lie on different irreducible components then there exist disjoint opens containing the two points so they can clearly be separated by regular functions. If $x,y \in X$ lie in the same irreducible component then we reduce to that irreducible component. If there is some $x,y \in U \subset Z$ open in $Z$ with a regular function separating $x, y$ then (UGH NOT QUITE).


\subsubsection{The Integral Case}

Let $X$ be an integral separated scheme. Then points of $X$ are separated by rational functions. Indeed, I claim that if $\stalk{X}{x} = \stalk{X}{y}$ inside the function field $K(X)$ then $x = y$. In fact, I will show that neither can dominate the other. Suppose that $\stalk{X}{x} \subset \stalk{X}{y}$ with $\m_y \cap \stalk{X}{x} = \m_x$ (we say $\stalk{X}{y}$ dominates $\stalk{X}{x}$) then there is a valuation ring $A$ dominating $\stalk{X}{y}$ inside $K(X)$ giving maps,
\begin{center}
\begin{tikzcd}
\Spec{K(X)} \arrow[d] \arrow[r] & X \arrow[d]
\\
\Spec{A} \arrow[ru, dashed] \arrow[r] & \Spec{\Z} 
\end{tikzcd}
\end{center}
via sending $\m_A \mapsto x$ and the local ring map $\stalk{X}{x} \embed A$ and by $\m_A \mapsto y$ and the local ring map $\stalk{X}{y} \embed A$. By the valuative criterion of separatedness, there is at most one such dotted map and thus $x = y$ and $\stalk{X}{x} = \stalk{X}{y}$.
\bigskip\\
Now I claim that if $\stalk{X}{x} \subset \stalk{X}{y}$ then $x,y$ are contained in the same affine open and $y \leadsto x$. Indeed, the prime ideal $\p = \m_y \cap \stalk{X}{x}$ corresponds to some point $y' \in \Spec{\stalk{X}{x}}$ which lies in every affine open containing $x$. Then $\stalk{X}{x} \subset \stalk{X}{y'} \subset \stalk{X}{y}$ because $\stalk{X}{y'} = (\stalk{X}{x})_\p$ which are units in $\stalk{X}{y}$. Then $\stalk{X}{y'} \embed \stalk{X}{y}$ is local so by our previous result $y = y'$.
\bigskip\\
I would like to improve this to give a rational function whose value at $x$ is $1$ and at $y$ is $0$. We need to know that $\m_x \cap \stalk{X}{y} \neq \m_y \cap \stalk{X}{x}$.

\section{Finite Intersection Property}

\begin{definition}
A collection of sets $\{ K_\alpha \}$ has the finite intersection property if every finite intersection is nonempty,
\[ K_{\alpha_1} \cap \cdots \cap K_{\alpha_n} \neq \empty \]
\end{definition}

\begin{prop}
A space is compact if and only if every collection $\{ K_\alpha \}$ of closed subsets with the finite intersection property has,
\[ \bigcap_{\alpha} K_\alpha \neq \empty \]
\end{prop}

\begin{proof}
We let $U_\alpha = K_\alpha$ where $U_\alpha$ is open iff $K_\alpha$ is closed. Then $\{ U_\alpha \}$ has no finite subcover iff each,
\[ U_{\alpha_1} \cap \cdots \cap U_{\alpha_n} \subsetneq X \iff K_{\alpha_1} \cap \cdots \cap K_{\alpha_n} \neq \empty \]
iff $\{ K_\alpha \}$ has FIP. Furthermore, $\{ U_\alpha \}$ is a cover iff,
\[ \bigcup_\alpha U_\alpha = X \iff \bigcap_\alpha K_\alpha = \empty\]
Therefore every cover has a finite subcover is equivalent to every collection of opens without a finite subcover is not a cover which is equivalent to every collection of closed sets with FIP has nonempty intersection. 
\end{proof}

\begin{prop}
Let $X$ be a topological space. Let $\{ K_\alpha \}$ be a collection of sets with the FIP such that one of the following holds,
\begin{enumerate}
\item the $K_\alpha$ are closed and some $K_{\alpha_0}$ is compact
\item $X$ is Hausdorff and $K_\alpha$ are compact.
\end{enumerate}
Then,
\[ \bigcap_{\alpha} K_\alpha \neq \empty \]
\end{prop}

\begin{proof}
Because compact sets are closed in a Hausdorff space condition (b) implies (a). Therefore, it suffices to prove the conclusion assuming (a). By FIT $K_{\alpha_0}$ is nonempty and $\{ K_{\alpha_0} \cap K_{\alpha} \}$ is a collection of closed sets with FIP in the compact set $K_{\alpha_0}$ and therefore,
\[ \bigcap_{\alpha} K_\alpha = \bigcap_{\alpha} (K_{\alpha_0} \cap K_{\alpha} ) \neq \empty \]
by the previous proposition.
\end{proof}

\begin{cor}
Let $I_n \subset \RR$ be a sequence of nonempty nested closed intervals. Then,
\[ \bigcap_n I_n \neq \empty \]
\end{cor}

\section{When Are Isometries Smooth}

\newcommand{\inner}[2]{\left< #1, #2 \right>}

\begin{defn}
Let $f : X \to Y$ be a map between metric spaces. We say that $f$ is \textit{isometric} if for all $x_1, x_2 \in X$,
\[ d_Y(f(x_1), f(x_2)) = d_X(x_1, x_2) \]
\end{defn}

\begin{prop}
Isometric maps are uniformly continuous with uniformly continuous inverse on their image.
\end{prop}

\begin{proof}
Uniform continuity is immediate because,
\[ d_X(x_1, x_2) < \epsilon \iff d_X(f(x_1), f(x_2)) \]
Furthermore, $f$ is injective because if $f(x_1) = f(x_2)$ then,
\[ d_X(x_1, x_2) = d_Y(f(x_1), f(x_2)) = 0 \]
so $x_1 = x_2$. Finally, it is clear that $f^{-1}$ is also isometric and thus uniformly continuous.
\end{proof}

\begin{prop}
Isometric maps $f : \RR^n \to \RR^n$ are affine orthogonal transformations.
\end{prop}

\begin{proof}
First we may translate $f$ such that $f(0) = 0$.
For $x,y \in \RR^n$ consider,
\[ ||f(x) - f(y)||^2  = || f(x) ||^2 - 2 \inner{f(x)}{f(y)} + || f(y) ||^2 = || x ||^2 - 2 \inner{f(x)}{f(y)} + || y ||^2 \]
however,
\[ || f(x) - f(y) ||^2 = || x - y ||^2 = || x ||^2 - 2 \inner{x}{y} + || y ||^2 \]
and therefore,
\[ \inner{f(x)}{f(y)} = \inner{x}{y} \]
so $f$ preserves the inner product. Furthermore we can show that $f$ is linear as follows. 
\begin{align*}
|| f(x + y) - f(x) - f(y) ||^2 & = || f(x + y) ||^2 - 2 \inner{f(x+y)}{f(x)} - 2 \inner{f(x+y)}{f(y)} + || f(x) + f(y) ||^2
\\
& = || x + y ||^2 - 2 \inner{x+y}{x} - 2 \inner{x+y}{y} + || f(x) ||^2 + 2 \inner{f(x)}{f(y)} + || f(y) ||^2
\\
& = || x + y ||^2 - 2 \inner{x+y}{x+y} + || x ||^2 + \inner{x}{y} + || y ||^2
\\
& = || x = y ||^2 - 2 || x + y ||^2 + || x + y ||^2 = 0
\end{align*}
and therefore $f(x + y) = f(x) + f(y)$. Furthermore, 
\begin{align*}
|| f(\lambda x) - \lambda f(x) ||^2 & = || f(\lambda x) ||^2 - 2 \inner{f(\lambda x)}{\lambda f(x)} + \lambda^2 || f(x) ||^2 = || \lambda x ||^2 - 2 \lambda \inner{\lambda x}{x} + \lambda^2 || x ||^2 
\\
& = \lambda^2 || x ||^2 - 2 \lambda || x ||^2 + || x ||^2 = 0
\end{align*}
and therefore $f(\lambda x) = \lambda f(x)$ so $f$ is linear and $\inner{f(x)}{f(y)} = \inner{x}{y}$ so $f$ is orthogonal and therefore invertible.
\end{proof}

\begin{thm}[Myers-Steenrod Theorem]
Let $M$ and $N$ be Riemannian manifolds with induced metrics and $\phi : M \to N$ is a surjective distance preserving map then $\phi$ is a smooth isometry.
\end{thm}

\section{Tangent Spaces a la EGA}

Grothendieck defines the tangent space in a kinda funny way. First define the tangent bundle,
\[ T_{X/S} = \mathbb{V}_X(\Omega_{X/S}) = \rSpec{X}{\Sym{}{\Omega_{X/S}}} \]
Then the tangent space at a point are the $\Spec{\kappa(x)}$-points over $X$ (which form a vector space). This is,
\[ T_{X/S}(x) = \Hom{X}{\Spec{\kappa(x)}}{\mathbb{V}_X(\Omega_{X/S})} = \Hom{\struct{X}}{\Omega_{X/S}}{\iota_* \struct{\kappa(x)}} = \Hom{\kappa(x)}{(\Omega_{X/S})_x \ot \kappa(x)}{\kappa(x)} \]
is the $\kappa(x)$-dual of $(\Omega_{X/S})_x \ot_{\struct{X}{x}} \kappa(x)$ which does make sense but doesn't agree with the Zariski tangent space in general. Maybe this is better because it has the correct dimension at the generic point unlike the Zariski tangent space.
\bigskip\\
Grothendieck shows [EGA IV$_4$ 16.5.13.2] that if $\kappa(s) \to \kappa(x)$ is an isomorphism then,
\[ T_{X/S}(X) \iso \Hom{\kappa(x)}{\m_x'/\m_x'^2}{\kappa(x)} \]
where $\m_x'$ is the maximal ideal of the local ring $\stalk{X_s}{x} = \stalk{X}{x} / \m_s \stalk{X}{x}$. This means that $T_{X/S}(x) = T_{X_s/s}(x)$ as it should. This is also Pset 9 problem 2 in Johan's first class.
\bigskip\\
I claim that this result actually holds more generally. Because $T_{X/S}(X) = T_{X_s/s}(x)$ in general I can work with $X_s \to \Spec{\kappa(s)}$ and assume that $X$ is over a field $k$. Then I claim that if $\kappa(x) / k$ is a separable algebraic extension then,
\[ T_{X/k}(x) \iso \Hom{\kappa(x)}{\m_x / \m_x^2}{\kappa(x)} \]
Indeed this is an immediate consequence of [H, Ex. II 8.1(a)].
\bigskip\\
Notice that if $\kappa(x) / k$ is not algebraic this immediately fails e.g. the generic $x \in \A^1_k$ point has $\m_x / \m_x^2 = (0)$ but $T_{\A^1/k}(x) \cong k(t)$. Furthermore, if $\kappa(x) / k$ is not separable this also fails e.g. consider $X = \Spec{\FF_p(t^{\frac{1}{p}})} \to \Spec{\FF_p(t)}$. Then $\Omega_{X/k} \cong \FF_p(t^{\frac{1}{p}})$ but $\m_x / \m_x^2 = 0$. 

\subsubsection{The Submersion Theorem}

DO THIS TOMORROW!!

\section{Genus and Reduction}

\begin{lemma}
Let $A_1, A_2$ be rings. Then there is an equivalence of categories,
\[ \Mod{A_1} \times \Mod{A_2} \to \Mod{A_1 \times A_2} \]
given by sending $(M_1, M_2) \mapsto (M_1)_{A_1 \times A_2} \oplus (M_2)_{A_1 \times A_2}$
\end{lemma}

\begin{proof}
Faithfullness is clear. For fullness, notice that if $\phi : M_1 \oplus M_2 \to N_1 \oplus N_2$ is a morphism of $A_1 \times A_2$-modules then letting $e_i \in A_i$ be the identity because $\phi(e_i \cdot m) = e_i \cdot \phi(m)$ we see that $\phi$ is represented by a diagonal matrix of morphisms proving fullness. Finally, let $M$ be an $A_1 \times A_2$-module. Then $M = e_1 M \oplus e_2 M$ because $e_1 + e_2 = 1$ and $e_1^2 = e_1$ and $e_2^2 = e_2$ and $e_1 e_2 = 0$ and $e_i M$ is naturally an $A_i$-module proving fullness.
\end{proof}

\begin{lemma}
Let $A$ be a Noetherian ring and $M$ a finite $A$-module such that $\dim{\Supp{A}{M}} = 0$. Then $\Supp{A}{M}$ is finite and,
\[ M \cong \bigoplus_{\p \in \Supp{A}{M}} M_\p \]
\end{lemma}

\begin{proof}
Because $M$ is finite type we have $\Supp{A}{M} = V(\Ann{A}{M})$. Let $B = A / \Ann{A}{M}$ then $B$ is noetherian and $\dim{B} = \dim{\Supp{A}{M}} = 0$ so $B$ is Artinian. Therefore $\Supp{A}{M} = \Spec{B}$ is finite and consists of the maximal ideals of $B$. Then by the Chinese remainder theorem,
\[ B \cong \prod_{\m \in \Spec{B}} B_\m \]
and therefore,
\[ M \cong \bigoplus_{\m \in \Spec{B}} M_{\m} \]  
\end{proof}

\begin{lemma}
Let $X$ be a Noetherian scheme and $\F$ a coherent $\struct{X}$-module with,
\[ \dim{\Supp{\struct{X}}{\F}} = 0 \] 
Then, $\Supp{\struct{X}}{\F}$ is finite and,
\[ \F \cong \bigoplus_{x \in \Supp{\struct{X}}{\F}} (\iota_x)_* \F_x \]
where $\iota_x : \Spec{\stalk{X}{x}} \to X$ is the canonical map and $\stalk{X}{x} / \Ann{\stalk{X}{x}}{\F_x}$ is Artin local.  
\end{lemma}

\begin{rmk}
Notice that because the $\stalk{X}{x}$-module $\F_x$ is supported only over the maximal ideal that $(\iota_x)_* \F_x$ is the same (viewing $\F_x$ as an abelian sheaf) as pushing forward along the map $x \embed X$.
\end{rmk}

\begin{proof}
Because $X$ is quasi-compact, we can choose a finite affine open cover $U_i$ on which $\F|_{U_i} = \wt{M_i}$. Then the result follows immediately from the previous lemma. Notice further that there is a canonical map,
\[ \F \to \prod_{x \in \Supp{\struct{X}}{\F}} (\iota_x)_* \F_x \]
from adjunction and the universal property of the product. Finiteness shows that this is a direct sum and we can check locally that it is an isomorphism. (DO THIS BETTER!!) 
\end{proof}


\begin{prop}
Suppose that $X$ is a finite type scheme over $k$ and $\I \subset \struct{X}$ a quasi-coherent ideal sheaf which is supported only at closed points. Let $Z \subset X$ be the closed subscheme determined by $Z$. Then, $\Supp{\struct{X}}{\I}$ is a finite set and,
\[ \chi(X, \struct{X}) - \chi(Z, \struct{Z}) = \sum_{x \in \Supp{\struct{X}}{\I}} \dim_k \I_x \]
\end{prop}

\begin{proof}
Consider the exact sequence of the closed immersion $\iota : Z \embed X$,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \I \arrow[r] & \struct{X} \arrow[r] & \iota_* \struct{Z} \arrow[r] & 0
\end{tikzcd}
\end{center}
Therefore,
\[ \chi(X, \struct{X}) - \chi(Z, \struct{Z}) = \chi(X, \I) \]
using that $\iota$ is affine so $H^i(X, \iota_* \F) = H^i(Z, \F)$. 
Furthermore, because $X$ is noetherian, $\I$ is coherent and thus $\Supp{\struct{X}}{\I}$ is closed but only contains closed points. Therefore, writing $\Supp{\struct{X}}{\I}$ as a union of finitely many irreducible components we see that these must be points (they are irreducible and only contain closed points) and thus $Y = \Supp{\struct{X}}{\I}$ consists of a finite number of closed points and is zero dimensional. Therefore, 
\[ \I \cong \bigoplus_{x \in \Supp{\struct{X}}{\I}} (\iota_x)_* \I_x \]
Thus,
\[ \chi(X, \I) = \sum_{x \in \Supp{\struct{X}}{\I}} \dim_k \I_x \]
where the higher cohomology of $\I$ vanishes because $\Supp{\struct{X}}{\I}$ is zero dimensional. 
\end{proof}

\begin{cor}
Suppose that $X$ is a finite type scheme over $k$ which is reduced at all non-closed points. Then, the ideal sheaf $\sN$ of $X_{\red} \embed X$ is supported at finitely many points and,
\[ \chi(X, \struct{X}) - \chi(X_{\red}, \struct{X_{\red}}) = \sum_{x \in \Supp{\struct{X}}{\I}} \dim_k \sN_x \]
\end{cor}

\begin{proof}
Consider the exact sequence of the closed immersion $X_{\red} \embed X$ which is also a homeomorphism,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \sN \arrow[r] & \struct{X} \arrow[r] & \struct{X_{\red}} \arrow[r] & 0
\end{tikzcd}
\end{center}
Therefore,
\[ \chi(X, \struct{X}) - \chi(X_{\red}, \struct{X_{\red}}) = \chi(X, \sN) \]
Furthermore, because $\stalk{X}{x}$ is reduced unless $x \in X$ is closed, we see that $\Supp{\struct{X}}{\sN}$ is zero dimensional. Explicitly, there is an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \sN_x \arrow[r] & \stalk{X}{x} \arrow[r] & \stalk{X_{\red}}{x} \arrow[r] & 0
\end{tikzcd}
\end{center} 
and $\stalk{X_{\red}}{x} = (\stalk{X}{x})_{\red}$ so we have $\sN_x = \nilrad{\stalk{X}{x}}$  vanishes if and only if $\stalk{X}{x}$ is reduced. Therefore, $\Supp{\stalk{X}{x}}{\sN}$ is supported only at closed points so we can apply the proposition to conclude.
\end{proof}

\begin{cor}
Let $X$ be a projective scheme with ample line bundle $\struct{X}(1)$.  Let $\I$ be an ideal sheaf on $X$ which is supported only at closed points. Let $Z \subset X$ be the closed subscheme determined by $Z$. Then $\Supp{\struct{X}}{\I}$ is a finite set and,
\[ P_X(n) - P_Z(n) = \sum_{x \in \Supp{\struct{X}}{\I}} \dim_{k}{\I_x} \]
where $P_X$ and $P_Z$ are the Hilbert polynomials. In particular, if $\dim{X} > 0$ we see that $X$ and $Z$ have the same dimension and degree.
\end{cor}

\begin{proof}
This follows from the fact that,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \I(n) \arrow[r] & \struct{X}(n) \arrow[r] & \iota_* \struct{Z}(n) \arrow[r] & 0
\end{tikzcd}
\end{center}
is exact and $\I(n) \cong \I$ because $\struct{X}(n)$ is a line bundle and thus its stalk is free of rank $1$ at each $x \in X$. Therefore, 
\[ P_X(n) - P_Z(n) = \chi(X, \struct{X}(n)) - \chi(Z, \struct{Z}(n)) = \chi(X, \I) \]
so we conclude by the previous calculation. 
\end{proof}

\begin{cor}
Let $X$ be a projective scheme with ample line bundle $\struct{X}(1)$.  Suppose that $X$ is reduced at all non-closed points. Then $\sN$ is supported at finitely many points and,
\[ P_X(n) - P_{X_{red}}(n) = \sum_{x \in \Supp{\struct{X}}{\sN}} \dim_{k}{\sN} \]
In particular, if $\dim{X} > 0$ we see that $X$ and $X_{\red}$ have the same dimension and degree.
\end{cor}

\subsection{The Application to Projective Cones}

Let $X \subset \P^n = \Proj{S}$ be cut out by the saturated ideal $I \subset S$. Then we consider the projective cone $C(X) = \Proj{S[z]/I[z]}$. If $X$ is integral then $S/I \embed \Gamma_*(\struct{X})$ which is a domain and thus $S/I$ is a domain so $I$ is prime. Thus $S[z]/I[z] = (S/I)[x]$ is a domain so $C(X)$ is integral. Likewise if $X$ is reduced then $S/I \embed \Gamma_*(\struct{X})$ is reduced so $I$ is a radical ideal. 

\begin{rmk}
This only holds for the \textit{saturated} ideal $I$. For example, consider $I = (xy, x^2) \subset k[x,y]$. Then $I^{\text{sat}} = (x)$ is a prime ideal and $\Proj{k[x,y]/I} = \Proj{k[x,y]/I^{\text{sat}}} = \Spec{k}$ is integral but $I$ is clearly not prime. 
\end{rmk}

If we choose the wrong ideal $I$ then we get the wrong cone $C_I(X) = \Proj{S[z]/I[z]}$ because $I[z]$ and $I^{\text{sat}}[z]$ need not have the same saturation. However, the problem is completely supported at the origin because $I$ and $I^{\text{sat}}$ become equal after localization at any ideal not containing some $x_i$. Therefore, the closed immersion $C(X) \embed C_I(X)$ is cut out by the nilpotent ideal sheaf $I^{\text{sat}}/I$ supported at the origin and we see $C_I(X)_{\red} = C(X)_{\red}$. Therefore, 
\[ P_{C_I(X)}(n) - P_{C(X)}(n) = \dim_k (I^{\text{sat}}/I)_{(\m)} \]
I SHOULD CHECK THIS PART!!!

\begin{example}
[H, Example, 9.8.4] we have a twisted cubic degenerating to a nodal cubic with reduced shit. Let $X_0$ have an affine patch cut out by,
\[ I_0 = (z^2, yz, xz, y^2 - x^2( x + 1)) \]
Then the reduction is cut out by the ideal $N = (z)$ so $\dim_k N/I_0 = 1$. Let $C = (X_0)_{\red}$ be the nodal cubic. Then,
\[ P_C(n) = 3 n + 0 \]
because it is a Cartier divisor in $\P^2$ of degree $3$ so,
\[ \chi(\struct{C}) = 1 - g_a = 0 \]
Because $X \to \A^1$ is a flat family, $P_{X_0}$ is equal to $P_{X_1}$ where $X_1$ is the twisted cubic given parametrically by $(t^2 - 1, t^3 - t, t)$ which is isomorphic to the twisted cubic curve $(t, t^2, t^3)$. This has ideal $I$ the relations for the functions $s^3, s^2 t, s t^2, t^3$   meaning the kernel of the map,
\[ k[x_0, x_1, x_3, x_4] \to k[s,t] \]
sending $x_0 \mapsto s^3, x_1 \mapsto s^2 t, x_3 \mapsto s t^2, x_4 \mapsto t^3$ and therefore the quotient is isomorphic to its image,
\[ S/I \cong k[s^3, s^2 t, s t^2, t^3] \] 
where we give $s,t$ degree $\frac{1}{3}$ (i.e. view it as a subring of $(k[s,t])^{(3)}$) to make this a graded isomorphism. We see that the ideals $I_a$ are homogeneous and prime since they are the kernel of a map of graded domains (the quotient of such a kernel is a subring of a domain and hence a domain) and therefore saturated (if $\p$ is a prime ideal not containing the irrelevant ideal and $x_i^{n} f \in \p$ then either $x_i \in \p$ for each $i$ or $f \in \p$). Therefore,
\[ \dim_{k} (S_0 / I_0)_d = \dim_k (k[s^4, s^3 t, s t^3, t^4])_d = 
\begin{cases}
1 & d = 0
\\
3 d + 1 & d > 0
\end{cases} \]
Therefore,
\[ P_{X_0} = 3 d + 1 \]
showing that,
\[ P_{X_0}(n) - P_C(n) = 1 = \dim_k (N/I_0) \]
as expected. 
\end{example}

\section{Local Systems}


\begin{rmk}
We want to prove the following claim: let $\L$ be a local system of $A$-modules valued in $M$ on a topological space $X$ (or Grothendieck topology) then $\chi(X, \L) = \chi(X, \underline{A})$. 
\end{rmk}

\begin{defn}
Suppose that $G_0(A)$ is equipped with a rank function $\rank_A : K_0(A) \to \Z$. Then for a sheaf of $A$-modules we define,
\[ \chi(X, \F) = \sum_{i = 0}^\infty \rank_A{H^i(X, \F)} \]
when $H^i(X, \F)$ are finite $A$-modules and there is vanishing of $H^i(X, \F)$ for sufficiently large $i$.
\end{defn}

\begin{rmk}
In the case that $A$ is a domain there is always a rank function $M \mapsto \dim_K (M \ot_A K)$ where $K = \Frac{A}$ which descends to $G_0(A)$ because it is additive over short exact sequences.
\end{rmk}

\subsection{The Case of a Topological Space}

\begin{prop}[Mayer-Vietoris]

\end{prop}


\begin{prop}
Let $\L$ be a local system valued in an abelian group $A$ on a topological space $X$ then $\chi(X, \L) = \chi(X, \underline{A})$. 
\end{prop}

\begin{proof}
Consider the 
\end{proof}

\begin{cor}
If $X$ is a (INSET CORRECT TOP PROPERTY) space and $\L$ is a local system on $X$ valued in an abelian group $A$ then,
\[ \chi(X, \L) = \chi(X, \underline{A}) = \sum_{i = 0}^{n} \rank \]
\end{cor}

\subsection{The General Case of a Site}



\section{Images of Maximal Ideals}

\begin{lemma}
Let $X$ be a locally finite type scheme over $k$. Then $x \in X$ is closed if and only if $\kappa(x) / k$ is finite. 
\end{lemma}

\begin{proof}
If $x \in X$ is closed then choose an affine open $x \in \Spec{A}$ with $A$ a finite type $k$-algebra. Then $x = \m \in \Spec{A}$ is closed so $\m$ is maximal so $A / \m$ is a finitely generated $k$-algebra and a field so $\kappa(x) = A /\m$ is a finite $k$-extension by the Nullstellensatz. 
\bigskip\\
Conversely, if $\kappa(x) / k$ is finite then for every affine open $x \in \Spec{A}$ we see that $A / \p \embed (A / \p)_\p$ because $A / \p$ is a domain but $\kappa(x) = (A / \p)_\p$ is finite dimensional over $k$ and so $A / \p$ is a finite dimensional $k$-algebra domain and hence a field so $\p$ is maximal. Thus $x$ is closed in each $\Spec{A}$ and since these cover $X$ we see that $x \in X$ is closed.
\end{proof}

\begin{prop}
A map of schemes locally of finite type over a field $k$ sends closed points to closed points.
\end{prop}

\begin{proof}
A point $x \in A$ being closed is equivalent to $\kappa(x)/k$ being finite by the Nullstellensatz. Then $\kappa(f(x)) \embed \kappa(x)$ so the image of a closed point is closed. 
\end{proof}

\begin{rmk}
In general this is false even for finite type maps. For example, consider $\Spec{\Q_p} \to \Spec{\Z_p}$ which is finite type since $\Q_p = \Z_p[p^{-1}]$. However, we give an extension of this result to arbitrary schemes.
\end{rmk}

\begin{lemma}
Let $\varphi : A \to B$ be a finite type ring map and $\m \subset B$ a maximal ideal and $\p = \varphi^{-1}(\m)$ the image. Then there exists $t \in A \setminus \p$ such that $\p A_t$ is maximal. 
\end{lemma}

\begin{proof}
Let $K = \Frac{A/\p}$. The maximal ideal $\m \in \Spec{B}$ corresponds to a maximal ideal $\bar{\m} \in \Spec{B'}$ with $B' = B \ot_A (A / \p)_\p = B \ot_A K$ which is the fiber. Then $B' / \m' = (B / \m)_\p = B / \m$ because $B / \m$ is a field. Now $B'$ is a finte type $K$-algebra because $A \to B$ is finite type and thus $K \to B \ot_A K$ is finite type. Therefore, by the Nullstellensatz, $B / \m$ is a finite extension of $K$. Hence through $A_\p \to A_\p / \p A_\p = K \to B / \m$ we see that $B / \m$ is a finite $A_\p$-module.
\bigskip\\
Choose generators $x_1, \dots, x_n \in B / \m$ as an $A$-algebra. Write $B / \m = A[x_1, \dots, x_n]/I$. Since $B / \m$ is finite over $A_\p$ each $x_i$ is integral over $A_\p$ so it satisfies some monic $p_i \in A_\p[x]$. Let $t \in A \setminus \p$ be the product of the denominators of the coefficients of all $p_i$. Then $p_i \in A_t[x]$ and thus $x_i \in B / \m$ is integral over $A_i$ and hence $A / \m$ is a finite $A_t$-module since $B / \m$ is generated by finitely many integral elements as an $A$-algebra and hence as an $A_t$-algebra. 
\bigskip\\
Consider $A_t / \p A_t = (A / \p)_t$. Since $\p B \subset \m$ we see that $B / \m$ is a finite $A_t / \p A_t$-module. Then $(A / \p)_t \subset K \subset B / \m$ and thus $K$ is finite over $(A / \p)_t$. Therefore, $(A / \p)_t$ is a field because $(A/\p)_t \subset K$ is an integral extension of domains with $K$ a field and hence $(A / \p)_t = K$ since $K = \Frac{A/\p}$. Therefore $\p A_t$ is a maximal ideal.
\end{proof}

\begin{prop}
Let $f : X \to Y$ be a locally finite type map of schemes. The image of a locally closed point is locally closed.
\end{prop}

\begin{proof}
Let $x \in X$ be locally closed. Choose some affine open $U = \Spec{B}$ with $x \in U$ closed and $\Spec{B} \to \Spec{A}$ for $\Spec{A} \subset Y$ affine open. It corresponds to some maximal ideal $\m \in \Spec{A}$ and therefore under the finite type ring map $\varphi : A \to B$ there is $t \in A \setminus \p$ with $\p = \varphi^{-1}(\m)$ such that $f(x) = \p$ is closed in $\Spec{A_t}$ by the lemma.
\end{proof}

\begin{rmk}
This is a corollary of Chevallay's theoren. 
\end{rmk}

\section{Degree of a Pullback of Curves}

\begin{prop}
Let $f : X \to Y$ be a finite locally free morphism of proper schemes over $k$. Let $\E$ be a vector bundle on $Y$ then,
\[ \chi(X, f^* \E) = \]  
\end{prop}
(HMMMMMM)

\section{Unimodular Lattices}

\begin{defn}
Let $(V, \inner{-}{-})$ be a real inner-product space with $n = \dim{V}$ finite. Then a \textit{lattice} is a subgroup $\Lambda \subset V$ such that $\Lambda \ot_{\Z} \R = V$.  
\end{defn}

\begin{defn}
Let $\Lambda$ be a lattice. Then we define the \textit{dual Lattice},
\[ \Lambda^* \subset V^* \quad \text{ where } \Lambda^* = \{ \varphi \in V^* \mid \forall \gamma \in \Lambda : \varphi(\gamma) \in \Z \} \]
However, $V$ is equipped with an inner product and under the natural isomorphism $V \iso V^*$ defined by $v \mapsto \inner{v}{-}$ we can identify,
\[ \Lambda^* \subset V \quad \text{ via } \quad \Lambda^* = \{ v \in V \mid \forall \gamma \in \Lambda \mid \inner{v}{\gamma} \in \Z \} \]
Thus we can write,
\begin{center}
\begin{tikzcd}
\Lambda^* \pullback \arrow[d] \arrow[r, "\sim"] & \Hom{}{\Lambda}{\Z} \arrow[d]
\\
V^* \arrow[r] & \Hom{}{\Lambda}{\RR}
\end{tikzcd}
\end{center}
\end{defn}

\begin{defn}
The \textit{covolume} or DEFINE
\end{defn}

\begin{prop}
$|\Lambda| \cdot |\Lambda^*| = 1$
\end{prop}

\begin{proof}
DO THIS!!
\end{proof}

\begin{defn}
A lattice $\Lambda$ is,
\begin{enumerate}
\item \textit{integral} if $\inner{\gamma}{\gamma'} \in \Z$ for all $\gamma, \gamma' \in \Lambda$
\item \textit{unimodular} if $|\Lambda| = 1$
\item \textit{even} if $|| \gamma ||^2 \in 2 \Z$ for all $\gamma \in \Lambda$
\item \textit{self-dual} if $\Lambda^* = \Lambda$ inside $V$.
\end{enumerate}
\end{defn}

\begin{lemma}
A lattice $\Lambda$ is self-dual if and only if $\Lambda$ is integral and unimodular. 
\end{lemma}

\begin{proof}
If $\Lambda$ is integral, $\Lambda \subset \Lambda^*$ and if $\Lambda$ is unimodular then $|\Lambda^*| = |\Lambda| = 1$ proving that $\Lambda = \Lambda^*$. Conversely, if $\Lambda = \Lambda^*$ then $|\Lambda| = |\Lambda^*| = 1$ and $\Lambda \subset \Lambda^*$ proving that $\Lambda$ is unimodular and integral.
\end{proof}

\begin{defn}
Let $\Lambda$ be a lattice. We define the theta function,
\[ \Theta_{\Lambda} : \h \to \CC \]
via the infinite summation,
\[ \Theta_{\Lambda}(\tau) = \sum_{\gamma \in \Lambda} e^{i \pi \tau || \gamma ||^2} \]
\end{defn}


\begin{prop}
The summation form of $\Theta_{\Lambda}$ is everywhere absolutely convergent on $\h$. 
\end{prop}

\begin{proof}
Notice that,
\[ | e^{i \pi \tau || \gamma ||^2} | = e^{- \pi || \gamma ||^2 \, \Im{\tau}} \]
Since $\Im{\tau} > 0$ we see that $0 < e^{-\pi \Im{\tau}} < 1$ and therefore because the number of lattice points of bounded norm grows polynomially the sum is convergent. 
\end{proof}

\begin{thm}[Poisson Summation]
Let $f : V \to \CC$ be a Schwartz function with Fourier transform $\hat{f} : V^* \to \CC$. Then,
\[ \sum_{\gamma \in \Lambda} f(\gamma) = \frac{1}{|\Lambda|} \sum_{\varphi \in \Lambda^*} \hat{f}(\varphi) \]
\end{thm}

\begin{prop}
Let $\Lambda$ be a lattice. For any $\tau \in \h$,
\[ \Theta_{\Lambda^*}(-1/\tau) = \left( \frac{\tau}{i} \right)^{\frac{n}{2}} | \Lambda | \cdot  \Theta_{\Lambda}(\tau) \]
\end{prop}

\begin{proof}
This is a direct application of Poisson summation for $f(v) = e^{i \pi \tau || v ||^2}$. A direct calculation shows that, 
\[ \hat{f}(v) = \left( \frac{i}{\tau} \right)^{\frac{n}{2}} e^{-i \pi || v ||^2 / \tau} \] 
Then,
\[ \Theta_{\Lambda}(\tau) = \sum_{\gamma \in \Lambda} f(\gamma) = \frac{1}{| \Lambda |} \sum_{\varphi \in \Lambda^*} \hat{f}(\varphi) = \frac{1}{|\Lambda|} \left( \frac{i}{\tau} \right)^{\frac{n}{2}} \Theta_{\Lambda^*}(-1/\tau) \]
\end{proof}

\begin{cor}
If $\Lambda$ is self-dual then,
\[ \Theta_{\Lambda}(-1/\tau) = \left( \frac{\tau}{i} \right)^{\frac{n}{2}} \Theta_{\Lambda}(\tau) \]
\end{cor}

\begin{prop}
If $\Lambda$ is integral then $\Theta_{\Lambda}(\tau + 2) = \Theta_{\Lambda}(\tau)$. If $\Lambda$ is even then $\Theta_{\Lambda}(\tau + 1) = \Theta_{\Lambda}(\tau)$.
\end{prop}

\begin{proof}
If $||\gamma||^2 \in \Z$ then,
\[ e^{i \pi (\tau + 2) || \gamma ||^2} = e^{2 \pi i || \gamma ||^2} e^{i \pi \tau || \gamma ||^2} = e^{i \pi \tau || \gamma ||^2} \] Likewise, if $|| \gamma ||^2 \in 2 \Z$ then,
\[ e^{i \pi (\tau + 1) || \gamma ||^2} = e^{\pi i || \gamma ||^2} e^{i \pi \tau || \gamma ||^2} = e^{i \pi \tau || \gamma ||^2} \]
\end{proof}

\begin{cor}
If $\Lambda$ is self-dual and even then $\Theta_{\Lambda}$ is modular.
\end{cor}

\begin{thm}
Let $\Lambda$ be an even integral unimodular lattice. Then $8 \divides \dim{\Lambda}$. 
\end{thm}

\begin{proof}
Since integral unimodular lattices are self-dual we see that $\Theta_{\Lambda}$ is modular. 
\end{proof}

\begin{proof}
Let $S, T \in \SL{2}{\Z}$ describe $T : \tau \mapsto \tau + 1$ and $S : \tau \mapsto -1/\tau$. The relation $(ST)^3 = \id$ describes the trajectory,
\[ \tau \mapsto - \frac{1}{\tau} \mapsto \frac{\tau - 1}{\tau} \mapsto \frac{\tau}{1 - \tau} \mapsto \frac{1}{1 - \tau} \mapsto \tau - 1 \mapsto \tau \]
Using the modularity properties,
\[ \Theta_{\Lambda}(\tau) = \left( \frac{i}{\tau - 1} \right)^{\frac{n}{2}} \left( \frac{\tau - 1}{i \tau} \right)^{\frac{n}{2}} \left( \frac{\tau}{i} \right)^{\frac{n}{2}} \Theta_{\Lambda}(\tau) = \left( \frac{1}{i} \right)^{\frac{n}{2}} \Theta_{\Lambda}(\tau) \]
Since $\Theta_{\Lambda}(\tau) \neq 0$ because,
\[ \Theta_{\Lambda}(i) = \sum_{\Lambda} e^{- \pi || \gamma ||^2} > 0 \]
and therefore, we must have $i^{\frac{n}{2}} = 1$ and hence $n$ is divisible by $8$. 
\end{proof}

\begin{rmk}
All these numbers lie in a wedge on the complex plane (indeed $\mathrm{Re}(z) > 0$) and thus the function $(-)^{\frac{n}{2}}$ is well-defined and is multiplicative. 
\end{rmk}

\section{Gradient Descent}

\subsection{Convex Functions}

\begin{defn}
Let $\Omega \subset V$ be a convex subset of a real vectorspace. Then $f : \Omega \to \RR$ is \textit{convex} if,
\[ f((1-t) x + t y) \le (1-t) f(x) + t f(y) \]
for all $t \in [0,1]$ and \textit{strictly convex} if for $x \neq y$,
\[ f((1-t) x + ty) < (1-t) f(x) + t f(y) \]
for $t \in (0, 1)$. 
\end{defn}

\begin{prop}
Suppose that $f : \Omega \to \RR$ is convex and $M$ the set of local minima. Then $f(M)$ is at most one point. If $f$ is strictly convex then $M$ is at most one point.
\end{prop}

\begin{rmk}
$f = 0$ is convex but not strictly covex shoing that $M$ can be large. Furthermore, $M$ can be empty even for strictly convex functions. For example for $f : \RR \to \RR$ via $f(x) = x$.
\end{rmk}

\begin{proof}
Suppose that $x, y \in M$ with $x \neq y$ and suppose that $f(x) \neq f(y)$. WLOG let $\nabla = f(x) - f(y) > 0$. Then,
\[ g(t) = f((1-t) x + ty) \le (1-t)f(x) + t f(y) = f(x) - t \nabla \]
By assumption, there exists some $\epsilon > 0$ such that $x$ is the minimum of $f$ on $B_\epsilon(x)$. Choosing,
\[ t = \frac{\epsilon}{2 || x - y||} \]
We see that $(1 - t)x + t y = x + t (y - x) \in B_\epsilon(x)$ and therefore,
\[ f(x) \le f((1-t)x + t y) \le f(x) - t \nabla \]
which is a contradiction to $t > 0$ and $\nabla > 0$. Thus $f(M)$ is empty or a single point. Furthermore, if $f$ is strictly convex then let $x, y \in M$ and assume that $x \neq y$. We showed that $f(x) = f(y)$ so we see that for,
\[ t \le \frac{\epsilon}{||x - y ||} \]
we see that,
\[ f(x) \le f((1 - t)x + t y) < (1 - t) f(x) + t f(y) = f(x) \]
which is a contradiction. Thus $x = y$. 
\end{proof}

\begin{prop}
If $f$ is convex and $(\nabla f)_x = 0$ then $x$ is a global minimum.
\end{prop}

\begin{proof}
For any $y \in \Omega$ let $\nabla = f(y) - f(x)$. It suffices to prove that $\nabla \ge 0$. Consider,
\[ g(t) = f((1-t)x + t y) \le (1 - t) f(x) + t f(y) = f(0) + \nabla t \]
Notice that $g'(0) = 0$ and,
\[ \frac{g(t) - g(0)}{t} \le \nabla \]
and thus taking the limit,
\[ g'(0) = \lim_{t \to 0} \frac{g(t) - g(0)}{t} \le \nabla \]
and thus $\nabla \ge g'(0) = 0$.
\end{proof}

\begin{cor}
Let $f$ be convex and differentiable at $x \in \Omega$. Then for any $y \in \Omega$,
\[ f(y) \ge f(x) + (y - x) \cdot (\nabla f)_x \]
\end{cor}

\begin{proof}
Define,
\[ g(y) = f(y) - f(x) - (y - x) \cdot (\nabla f)_x \]
Then we see that $g$ is convex and $(\nabla g)_x = 0$ so $x$ is a global minimum of $g$ and $g(x) = 0$ so $g \ge 0$ proving the claim.
\end{proof}

\subsection{Lipschitz Condition}

\begin{defn}
We say that $f : \Omega \to \RR$ is Lipschitz-differentiable if $f$ is differentiable and there is a constant $L > 0$ such that for all $x, y \in \Omega$,
\[ || (\nabla f)_x - (\nabla f)_y || \le L || x - y || \]
\end{defn}

\begin{defn}
Let $f : \Omega \to \RR$ be a differentiable function. Then for some fixed $\eta > 0$ we define the \textit{gradient descent iteration} of $x$ as,
\[ x^+ = x - \eta (\nabla f)_x \]
\end{defn}

\begin{lemma}
If $f$ is Lipschitz-differentiable and $\eta \le L^{-1}$ then,
\[ - \tfrac{3}{2} \eta || (\nabla f)_x ||^2 \le f(x^+) - f(x) \le - \tfrac{1}{2} \eta || (\nabla f)_x ||^2 \]
\end{lemma}

\begin{proof}
Define,
\[ g(t) = f((1-t) x + t x^+) = f(x - t \eta (\nabla f)_x) \]
Because $g$ is continuously differentiable since $f$ is continuously differentiable,
\[ f(x^+) - f(x) = g(1) - g(0) = \int_0^1 g'(t) \d{t} \]
However,
\[ g'(t) = - \eta (\nabla f)_x \cdot (\nabla f)_{x(t)} \]
Therefore,
\begin{align*}
| f(x^+) - f(x) + \eta || (\nabla f)_x ||^2| &= \eta \left| (\nabla f)_x \cdot \int_0^1 [(\nabla f)_x - (\nabla f)_{x(t)} ] \d{t} \right]
\\
& \le \eta || (\nabla f)_x || \int_0^1 || (\nabla f)_x - (\nabla f)_{x(t)} || \d{t} 
\\
& \le \eta L || (\nabla f)_x || \int_0^1 || x - x(t) || \d{t}
\\
& = \eta^2 L || (\nabla f)_x ||^2 \int_0^1 t \d{t}
\\
\& = \tfrac{1}{2} \eta^2 L || (\nabla f)_x ||^2 
\end{align*}
If we take $\eta < L^{-1}$ then completing the proof we find,
\[ | f(x^+) - f(x) + \eta || (\nabla f)_x ||^2| \le \tfrac{1}{2} \eta || (\nabla f)_x ||^2 \]
\end{proof}

\begin{rmk}
Therefore, defining a sequence $x_{k+1} = x_k^+$ then either $x_k$ hits a point with $(\nabla f)_{x_k} = 0$ at which point the sequence stabilizes or $f(x_k)$ forms a strictly decreasing sequence.
\end{rmk}

\begin{rmk}
Consider $f : \RR \to \RR$ given by $f(x) = x$. This has a constant derivative and hence we can take $L$ to be any positive constant. However, we get the sequence $x_k = x_0 - k \eta$ does not converge and gives an unbounded decreasing sequence $f(x_k)$. 
\end{rmk}

\begin{cor}
Suppose that in addition, $f$ is bounded below. Then the decreasing sequence $f(x_k)$ must converge to a limit. However, I claim that the sequence $x_k$ need not converge to a limit. Indeed, consider the following example.
\end{cor}

\begin{example}
Consider $f : \R \to \R$ defined by,
\[ f(x) =
\begin{cases}
0 & x \le 0
\\
\varphi(x)  & 0 < x < 1
\\
\frac{1}{x} & x \ge 1
\end{cases} \]
where $\varphi$ is a smooth function which interpolates to make $f$ smooth. 
Then $f$ has second derivative bounded so it is Lipschitz-differentiable and notice that $f$ is even strictly convex on $[1, \infty)$. However, let $x_0 = 1$. Then we get the recurrence,
\[ x_{k+1} = x_k + \tfrac{\eta}{x_k^2} \]
This is increasing so we just need to show that it is unbounded. Suppose that $x_k < n$ for all $n$. Then $x_{k+1} - x_k > \tfrac{\eta}{n^2}$ so for $N > \eta^{-1} n^2 (n - x_k)$ we would have $x_{k+N} \ge n$ giving a contradiction proving that this sequence is indeed unbounded. However, $f$ on $\R$ we see that $f$ achieves it minimum but is not convex on this region. We will see that if we have both convexity and achieving a minimum then this cannot happen.
\end{example}

\begin{rmk}
Now we suppose that $f$ achieves it minimum at some point $x^*$. Then we want to bound how quickly the distance between $x$ and $x^*$ decreases under $x \mapsto x^+$.
\end{rmk}

\begin{prop}
Suppose that $f : \Omega \to \RR$ is convex and Lipschitz-differentiable with $\eta < L^{-1}$. Fix $x^* \in \Omega$ then,
\[ || x - x^* ||^2 - || x^+ - x^* ||^2 \ge 2 \eta (f(x^+) - f(x^*)) \ge 0 \]
\end{prop}

\begin{proof}
We expand,
\[ || x^+ - x^* ||^2 = || (x^+ - x) + (x - x^*) ||^2 = || x^+ - x ||^2  + 2 (x^+ - x) \cdot (x - x^*) + || x - x^* ||^2 \]
Therefore,  
\[ || x - x^* ||^2 - || x^+ - x^* ||^2 = - 2 (x^+ - x^*) \cdot (x - x^*) - || x^+ - x ||^2 = 2 \eta (\nabla f)_x \cdot (x - x^*) - \eta^2 || (\nabla f)_x ||^2  \]
However, by previous lemmas,
\[ f(x^*) - f(x) \ge (\nabla f)_x \cdot (x^* - x) \]
and also,
\[ f(x^+) - f(x) \le - \tfrac{1}{2} \eta || (\nabla f)_x ||^2 \]
Therefore,
\[ || x - x^* ||^2 - || x^+ - x^* ||^2 \ge 2 \eta (f(x) - f(x^*)) + 2 \eta (f(x^+) - f(x)) = 2 \eta (f(x^+) - f(x^*)) \]  
proving the claim.
\end{proof}

\begin{rmk}
If $x^*$ is a global (local suffices since $f$ is convex) minimum of $x^*$ (and hence $f$ is bounded below) The above proposition implies that the seqeuence $||x - x^*||$ is decreasing.
\end{rmk}

\begin{prop}
Suppose that $f : \Omega \to \RR$ is convex and has a global minimum (and hence $f$ is bounded below) and $f$ is Lipschitz-differentiable with $\eta < L^{-1}$. Furthermore assume that the unit ball in $V$ is precompact (e.g. if $V$ is finite dimensional) then $x_k \to x^*$ converges where $x^*$ is a global minimum and,
\[ f(x_k) - f(x^*) \le \frac{|| x_0 - x^* ||^2}{2 \eta k} \]
\end{prop}

\begin{proof}
Let $x'$ achieve the global minimum. Then the previous lemma shows that $x_k \in B_r(x')$ where $r = 2 \eta (f(x_0) - f(x'))$. Since $\overline{B_r(x')}$ is compact we see that $x_k$ has a convergent subsequence $x_{k_i} \to x^*$. I claim that $x^*$ is a global minimum of $f$. First, since $f^* = f(x')$ is a global minimum, $f$ is bounded below and thus the decreasing sequence $f(x_k)$ converges and hence is Cauchy. Therefore,
\[ \lim_{k \to \infty} || (\nabla f)_{x_k} ||^2 \le 2 \eta^{-1} \lim_{k \to \infty} |f(x_{k+1}) - f(x_k)| = 0 \]
Therefore,
\[ || (\nabla f)_{x^*} || \le || (\nabla f)_{x^*} - (\nabla f)_{x_k} || + || (\nabla f)_{x_k} || \le L || x^* - x_k || + || (\nabla f)_{x_k} ||  \]
The first term goes to zero on the subsequence $x_{k_i}$ and the second term goes to zero and therefore $(\nabla f)_{x^*} = 0$ so $x^*$ is a global minimum of $f$. Therefore we can apply the previous lemma to conclude,
\[ || x_k - x^* ||^2 - || x_{k+1} - x^* ||^2 \ge 2 \eta (f(x_{k+1}) - f(x^*)) \ge 0 \]
meaning that,
\[ || x_{k+1} - x^* || \le || x_k - x^* || \]
Therefore, since $x_{k_i} \to x^*$ we see that $x_k \to x^*$ converges. Finally, because $f(x_k)$ is a decreasing sequence,
\begin{align*}
f(x_k) - f(x^*) & \le \frac{1}{k} \sum_{j = 1}^{k} [f(x_i) - f(x^*)] \le \frac{1}{2 \eta k} \sum_{j = 1}^k \left( || x_{j-1} - x^* ||^2 - || x_{j} - x^* ||^2 \right) 
\\
& = \frac{1}{2 \eta k} \left( || x_0 - x^* ||^2 - || x_k - x^* ||^2 \right) \le \frac{|| x_0 - x^* ||^2}{2 \eta k}
\end{align*}
\end{proof}

\section{Relationships between Geometric Categories}

\begin{rmk}
We consider the properties of the following morphisms of categories,
\[ \mathbf{AffSch} \embed \mathbf{Sch} \embed \mathbf{LRS} \embed \mathbf{RingSp} \to \mathbf{Top} \to \mathbf{Set} \]
\end{rmk}

\section{$G$-Structure on the Cotangent Bundle}

Consider an action $G \acts X$ over a base $S$.
\bigskip\\
The map $a_G = (\id, a) : G \times X \to G \times X$ defines a morphism $\psi : a_G^* \Omega_{G \times X/S} \iso \Omega_{G \times X/S}$. Now we have,
\[ \Omega_{G \times X /S} \cong \pi_1^* \Omega_{G/S} \oplus \pi_2^* \Omega_{X/S} \]
Furthermore,
\[ a_G^* \Omega_{G \times X / S} \cong \pi_1^* \Omega_{G/S} \oplus a^* \Omega_{X/S} \]
Therefore $\psi$ is a matrix,
\[ \psi = 
\begin{pmatrix}
\psi_{11} & \psi_{21}
\\
\psi_{12} & \psi_{22} 
\end{pmatrix} \]
Furthermore, $\pi_1 \circ a_G = \pi_1$ so $\psi \circ a_G^* \d{\pi_1} = \d{\pi_1}$ which is the inclusion $\pi_1^* \Omega_{G/S} \to \Omega_{G \times X / S}$ and therefore $\psi$ on the $\pi_1^* \Omega_{G/S}$ factor is trivial meaning the matrix is of the form,
\[ \psi = 
\begin{pmatrix}
\id & \psi_{21}
\\
0 & \psi_{22}
\end{pmatrix} \]
therefore,
\[ \psi_{22} : a^* \Omega_{X/S} \to \pi_2^* \Omega_{X/S} \]
is an isomorphism since the matrix is an isomorphism giving the required structure.

\section{Vector Bundles on Vector Bundles}

Given a vector bundle $\pi : E \to X$ and a vector bundle $\pi' : E' \to E$ is it true that $\pi' : E' \to X$ in, in some sense, a vector bundle. 
\bigskip\\
If $E'$ is pulled back from a vector bundle $V \to X$ then I think $E'$ as an $X$-vector bundle is $V \oplus E$. Therefore if $s : X \to E$ is the zero section, we should ask if $E' = \pi^* s^* E$. 
\bigskip\\
In the topological category this is true because $\pi : E \to X$ is a homotopy equivalence and indeed $s \circ \pi$ is homotopic to the identity and therefore $E' \cong \id^* E' \cong \pi^* s^* E'$. 
\bigskip\\
However, this is false in the holomorphic/algebraic category. Indeed consider $X = \P^1$ and the trivial bundle so $E = \P^1 \times \A^1 \to \P^1$. Then consider the vector bundle,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \pi_1^* \struct{\P^1}(-1) \arrow[r] & \E \arrow[r] & \pi_1^* \struct{\P^1}(1) \arrow[r] & 0
\end{tikzcd}
\end{center}
corresponding to the extension class,
\begin{align*}
\xi \in \Ext{1}{E}{\pi_1^* \struct{\P^1}(-1)}{\pi_1^* \struct{\P^1}(1)} & = H^1(E, \pi_1^* \struct{\P^1}(-2)) = H^1(\P^1, (\pi_1)_* \pi_1^* \struct{\P^1}(-2))
\\
& = H^1(\P^1, \struct{\P^1}(-2)) \ot_k k[t] \cong k[t]
\end{align*}
which is given by $\xi = t$. Therefore, at $t = 0$ we have the trivial extension so $\E_t \cong \struct{}(-1) \oplus \struct{}(1)$ and for $t \neq 1$ we have the nontrivial extension $\E_t \cong \struct{}^{\oplus 2}$.
\bigskip\\
Therefore, $\E$ is not the pullback of any vector bundle on $\P^1$ otherwise its fibers would be constant. However, it is not clear if $\E$ can be thought of as a vector bundle over $\P^1$.(WAIT)

\section{Why the Stabilizers in the Moduli Space of Elliptic Curves are important}

``The moduli space of elliptic curves is just $\A^1$ because an elliptic curve is determined uniquely by its $j$-invariant''. This is wrong even over $\CC$ but it becomes clear if we try to work in a field that doesn't contain all square roots (or even $\Z$). If $k$ does not have all square roots then it is false that $E$ is determined by $j(E)$. Indeed,
\[ y^2 = x^3 + a x + b \]
and 
\[ y^2 \cdot d = x^3 + ax + b \]
where $d \in k$ is a nonsquare are nonisomorphic curves which become isomorphic over $k(\sqrt{d})$. Indeed, we see that away from the special values $j(E) \neq 0, 1728$ the elliptic curves with fixed $j$-invariant are classified by $k^\times / (k^\times)^2$ and for $j = 0, 1728$ they are classified by $k^\times / (k^\times)^6$ and $k^\times / (k^\times)^4$. 
\bigskip\\
Indeed, since these curves become isomorphic over $\bar{k}$ they are all forms of some $E_0$. Then $\Aut{E_0} \cong \mu_2, \mu_6, \mu_4$ (note I think it really should be $\Z / 2 \Z$ not $\mu_2$ but these are the same in characteristic not $2$ and indeed I am not sure what happens for $p \le 5$ anyway) as above and therefore isomorphism classes of curves over $k$ with fixed $j(E)$ are classfieid by,
\[ H^1(k, \mu_n) \cong k^\times / (k^\times)^n \]
by Kummer theory. 
\bigskip\\
What does this mean at the level of stacks. A morphism $\Spec{k} \to \mathcal{M}_{1,1}$ landing in the topological point determined by $j(E)$ factors through the residual Gerbe which is usually $B(\Z/2\Z)$ (at the special points it is $B \mu_6$ or $B \mu_4$) and therefore there are actually many such maps classified by $(\Z / 2 \Z)$-bundles on $k$ i.e. Galois $2$-covers which are, via Kummer theory, classified by $H^1(k, \Z / 2 \Z) = k^\times / (k^\times)^2$ and ditto for the special points. Therefore, we indeed see that the stabilizers of this stack carry useful arithmetic data. 

\section{$E$-Fibrations}

For simplicitly assume that $k$ has characteristic zero. I think everything here works in every characteristic except for possibly $2$ and $3$.

\begin{defn}
Let $E$ be an elliptic curve over a field $k$. An $E$-fibration is a smooth proper morphism $\E \to S$ with $S$ over $k$ such that each geometric fiber $\E_K$ is isomorphic to $E_K$ as a curve (not as a group scheme). We say that an $E$-fibration is trivial if it is isomorphic to $E \times S$ as an $S$-scheme.  
\end{defn}


\begin{lemma}
If $\E \to S$ has a section then it is trivial after a finite \etale cover.
\end{lemma}

\begin{proof}
If $\E \to S$ has a section then it is a family of elliptic curves over a base and therefore defines a morphism $S \to \M_{1,1}$ whose image is topologically a single point. Since $\M_{1,1}$ is a DM-stack this implies that there is a finite \etale cover $S' \to S$ such that $S' \to \M_{1,1}$ is constant (the residual gerbe is finite \etale) and thus $\E' \to S'$ is trivial. 
\end{proof}

\begin{prop}
An $E$-fibration is locally trivial in the \etale topology.
\end{prop}

\begin{proof}
Because $\E \to S$ is smooth, \etale locally on $S$ it has sections and hence after a further finite \etale extension it is trivial. 
\end{proof}


\begin{rmk}
Here is a weird argument which works in some more general cases but only when $S$ is regular. We can similarly define an $F$-fibration for any scheme $F$ over a field $k$. Suppose that $F$ is smooth and has smooth aut scheme $\Aut{F}$. Then if $S$ is regular I claim that every $F$-fibration over $S$ is locally trivial in the \etale topology.
\bigskip\\
Let $X \to S$ be an $F$-fibration with regular $S$. Then consider $I = \mathrm{Isom}_S(X, S \times_k F)$ which is automatically an $\Aut{F}$-pseudo-torsor. I want to show that $I$ is actually an \etale torsor. The strategy is to use the fact that (representable) pseudotorsors for a smooth group scheme which are fppf are localy trivial in the \etale topology. This is because using fppf descent and the pseudotorsor condition the morphisms is smooth and hence admits sections locally in the \etale topology locally trivializing it as a torsor. Thus it suffices to show that $I \to S$ is fppf. Becuase the geometric fibers of $X \to S$ are all isomorphic to $F_K$ the fibers of $I \to S$ are isomorphic to $\Aut{F_K}$ and hence have constant dimension. In particular, $I \to S$ is surjective. (I DONT THINK THE NEXT STEP WORKS) I want to use miracle flatness but $I$ could be highly singular so ...
\end{rmk}

\begin{prop}
Let $S$ be a curve. Then every $E$-fibration over $S$ is trivial after a finite (not necessarily \etale) extension.
\end{prop}

\begin{proof}
$\E \times_S \E \to \E$ has a section so if we can produce a subscheme $S' \subset \E$ which is finite over $S$ then $\E_{S'} \to S'$ admits a section and hence is trivial after an additional finite \etale extension. There is an \etale open $U \to S$ with a section and hence a map $U \to \E$ over $S$. Taking the scheme theoretic image gives a closed subscheme $S' \subset \E$ such that $S' \to S$ is nonconstant and hence finite since it is a map of curves. 
\end{proof}

\begin{example}
Consider $x \in E$ a nontorsion point. Then take $E \times \P^1 \to \P^1$ and identify the fibers over $\pm 1$ via translation by $x$ to give $X \to S$ where $S$ is a nodal curve. This exists as a scheme by (REF) but is not projective (example on p.198 of Raynaud's thesis). In fact it is easy to see that $X$ cannot be projective over $S$. Otherwise $X$ would be projective and thus would admit a line bunle $\L$. Pulling back gives a line bundle $\L'$ on $E \times \P^1$ which takes the form $\L_1 \ot \struct{}(n)$ for some $n$ and $\L_1 \in \Pic{E}$. However, the line bundle $\L_1$ must be isomorphic to its pullback by $\varphi : E \to E$ given by translation by $x$. Now, 
\[ \varphi \struct{E}([p_1] + \cdots + [p_n]) = \struct{E}([p_1 + x] + \cdots + [p_n + x]) = \struct{E}([p_1] + \cdots + [p_n] + n [x] - n [e]) \]
and therefore we need that $n [x] = n[e]$ meaning that $nx = e$ so $x$ must be a torsion point giving a contraction unless $\L_1 = \struct{E}$. Therefore $\L' \cong \struct{\P^1}(n)$ which is not ample. Since $E \times \P^1 \to X$ is finite and $\L$ is ample, its pullback $\L'$ is ample giving a contradiction. 
\end{example}

\begin{rmk}
Since an $E$-fibration is \etale locally trivial they are forms of $E$ and therefore classified by $H^1_{\et}(S, \Aut{E})$. 
\end{rmk}

\begin{prop}
An $E$-fibration is equivalent to the data of an $E$-torsor after a finite \etale extension of the base.
\end{prop}

\begin{proof}
Consider the sequence,
\begin{center}
\begin{tikzcd}
1 \arrow[r] & E \arrow[r] & \Aut{E} \arrow[r] & G \arrow[r] & 1
\end{tikzcd}
\end{center}
I claim that $G$ is a finite \etale group scheme over $k$. (IS THIS TRUE!!) Therefore, there is an exact sequence,
\begin{center}
\begin{tikzcd}
H^1(S, E) \arrow[r] & H^1(S, \Aut{E}) \arrow[r] & H^1(S, G)
\end{tikzcd}
\end{center}
Given a class $[\E \to S] \in H^1(S, \Aut{E})$ its image in $H^1(S, G)$ is killed by a finite \etale extension (since $G$ is finite \etale every $G$-torsor is finite \etale and thus kills itself) hence we can assume that $[\E \to S]$ is in the image of $H^1(S, E) \to H^1(S, \Aut{E})$ after a finite \etale extension of the base.
\end{proof}

\begin{lemma}
If $[\E \to S] \in H^1(S, E)$ is torsion then it is killed by a finite \etale extension.
\end{lemma}

\begin{proof}
Consider the sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & E[n] \arrow[r] & E \arrow[r, "n"] & E \arrow[r] & 0
\end{tikzcd}
\end{center}
where $E[n]$ is a finite \etale group scheme over $k$ (IS THIS TRUE). Therefore we get a sequence,
\begin{center}
\begin{tikzcd}
H^1(S, E[n]) \arrow[r] & H^1(S, E) \arrow[r, "n"] & H^1(S, E)
\end{tikzcd}
\end{center}
therefore if $[\E \to S] \in H^1(S, E)$ is torsion it lies in some kernel and hence in the image of some $[c'] \in H^1(S, E[n])$ which is killed by a finite \etale cover because $E[n]$ is a finite \etale group scheme.
\end{proof}

\begin{prop}
If $S$ is regular then every $E$-fibration over $S$ is projective and trivial in the finite \etale topology. 
\end{prop}

\begin{proof}
By [Raynaud, Cor. XIII 2.4] every $E$-torsor is projective and torsion in $H^1(S, E)$ so this follows from the previous results.  
\end{proof}

(WANT AN EXAMPLE OF NORMAL SURFACE WITH LOC-TORSION TORSION WHICH IS NOT TORSION)

\section{Review of Basics}

\begin{rmk}
The Zariski topology on $\Spec{A}$ makes the relations between $I$ and $Z$ definitional. 
\end{rmk}

\begin{prop}
For any $Q \subset \Spec{A}$,
\[ \overline{Q} = V(\bigcap Q) = V(I(Q)) \quad \text{ where } \quad I(Q) = \{ f \in A \mid \forall \p \in S : f \in \p \} \]
\end{prop}

\begin{proof}
By definition, if $\p \in Q$ then $I(Q) \subset \p$ so $\p \in V(I(Q))$ meaning $S \subset V(I(Q))$. Furthermore, if $Q \subset V(J)$ for some ideal $J$ then $J \subset \p$ for each $\p \in Q$ meaning,
\[ J \subset \bigcap_{\p \in S} \p = I(Q) \]
and thus $V(I(Q)) \subset V(J)$ proving the claim.
\end{proof}

\begin{prop}
for any $S \subset A$ we have $I(V(S)) = \sqrt{S}$ where,
\[ \sqrt{S} = \bigcap_{\p \supset S} \p \]
\end{prop}

\begin{proof}
This is by definition since $V(S) = \{ \p \mid \p \supset S \}$ and 
\[ I(V(S)) = \{ f \in A \mid \forall \p \in V(S) : f \in \p \} \]
\end{proof}

\begin{prop}
Let $\varphi^* : \Spec{B} \to \Spec{A}$ be a map of affine schemes. Then,
\begin{enumerate}
\item $(\varphi^*)^{-1}(D(f)) = D(\varphi(f))$
\item $(\varphi^*)^{-1}(V(I)) = V(\varphi(I))$
\item $\overline{\varphi^*(V(I))} = V(\varphi^{-1}(I))$
\end{enumerate}
\end{prop}

\begin{proof}
First,
\[ \varphi^*(\p) \in D(f) \iff f \notin \varphi^*(\p) \iff \varphi(f) \in \p \iff \p \in D(\varphi(f)) \]
Second,
\[ \varphi^*(\p) \in V(I) \iff \varphi^*(\p) \supset I \iff \p \supset \varphi(I) \iff \p \in V(\varphi(I)) \]
For (c),
\[ \overline{\varphi^*(V(I))} = V(\bigcap \varphi^*(V(I))) = V(\bigcap_{\p \supset I} \varphi^{-1}(\p)) = V(\varphi^{-1}(\bigcap_{\p \supset I})) = V(\varphi^{-1}(\sqrt{I})) = V(\sqrt{\varphi^{-1}(I)}) = V(\varphi^{-1}(I)) \]
where,
\[ \varphi^{-1}(\sqrt{I}) = \sqrt{\varphi^{-1}(I)} \]
because,
\[ x \in \varphi^{-1}(\sqrt{I}) \iff \varphi(x) \in \sqrt{I} \iff \varphi(x)^n \in I \iff \varphi(x^n) \in I \iff x^n \in \varphi^{-1}(I) \iff x \in \sqrt{\varphi^{-1}(I)} \]
\end{proof}

\begin{rmk}
Dually, one might expect $\varphi^*(D(f))^\circ = D(\varphi^{-1}(f))$ but this is false. Indeed, consider $\varphi : \Z \to \Q$ then $\varphi^*(D_{\Q}(2)) = \{ (0) \}$ has empty interior but $D_{\Z}(2)$ is nonempty. 
\end{rmk}

\begin{rmk}
Some of the sets on the RHS are not ideals but it is clear that for any subset $S \subset A$ we have $D(S) = D(S A)$ with $SA$ the ideal generated by $S$.
\end{rmk}

\begin{rmk}
For any multiplicative subset $S \subset A$ we have $\Spec{S^{-1} A} \to \Spec{A}$ identifies the subset where $S \cap \p = \empty$ in general this cannot be expressed as the condition $I \not\subset \p$ for some ideal $I \subset A$ so this is not open. For example, let $A = \Z$ and $S = \Z \setminus \{ 0 \}$ then $S \cap \p = \empty$ if and only if $\p = (0)$ but we need some $I \neq (0)$ which is contained in every prime, impossible since $\Z$ is reduced. 
\end{rmk}

\begin{cor}
If $\varphi : A \to B$ satisfies $\ker{\varphi} \subset \nilrad{A}$ if and only if $\varphi^* : \Spec{B} \to \Spec{A}$ is dominant. 
\end{cor}

\begin{proof}
Since $\varphi^{-1}(0) = \ker{\varphi}$ we have,
\[ \overline{\varphi^*(\Spec{B})} = V(\ker{\varphi}) \]
and the result follows. Let's do this directly. First, let $\ker{\varphi} \subset \nilrad{A}$ we need to show any nonempty open $U \supset \Spec{A}$ conatins some element of the image. Choose $D(f) \subset U$ with $f \notin \nilrad{A}$ so $D(f)$ is nonempty then $\varphi(f) \notin \nilrad{B}$ (see the remark) so $D(\varphi(f))$ is nonempty and $D(\varphi(f)) \to D(f)$ proving the claim. Conversely, if $\varphi^*$ is dominant and $f \in \ker{\varphi}$ then if $D(f)$ is nonempty there is some $\p \in \Spec{B}$ mapping into $D(f)$ meaning $\varphi(f) \notin \p$ but $\varphi(f) = 0$ giving a contradiction so $D(f)$ is empty menaing $f \in \nilrad{A}$.
\end{proof}

\begin{rmk}
Notice that,
\[ \varphi^{-1}(\nilrad{B}) \subset \nilrad{A} \iff \ker{\varphi} \subset \nilrad{A} \] 
The forward implication is obvious. Converely, if $\ker{\varphi} \subset \nilrad{A}$ then if $\varphi(x) \in \nilrad{A}$ then $\varphi(x)^n = 0$ so $\varphi(x^n) = 0$ and hence $x^n \in \ker{\varphi} \subset \nilrad{A}$ so $x \in \nilrad{A}$ proving the claim. 
\end{rmk}

\section{Factoring Through a Point}

\begin{prop}
Let $f : X \to Y$ be a morphism of schemes with $f(X) = \{ y \}$ one point. Then there is a factorization,
\begin{center}
\begin{tikzcd}
X \arrow[r, "f"] & Y
\\
X_{\red} \arrow[u, hook] \arrow[r] & \Spec{\kappa(y)} \arrow[u, hook] 
\end{tikzcd}
\end{center}
\end{prop}

\begin{proof}
It suffices to show that $X_{\red} \to Y$ factors through $\Spec{\kappa(y)}$. Since $f(X) = \{ y \}$ reduce to affine opens $U \to V$ is $\varphi^* : \Spec{B} \to \Spec{A}$ image is $\p \subset A$. Thus $\p = \varphi^{-1}(\q)$ for all primes $\q \subset B$. Thus,
\[ \p = \varphi^{-1}(\nilrad{B}) \]
and also if $f \notin \p$ then $\varphi(f) \notin \q$ so $\varphi(f)$ is a unit. Therefore we get a factorization,
\[ A \to (A / \p)_{\p} \to B/\nilrad{B} = B_{\red} \]
\end{proof}

\section{The Stack of All Curves is Not Separated}

\newcommand{\Y}{\mathscr{Y}}
\newcommand{\Isom}[3][]{\mathrm{Isom}_{#1} \left( #2, #3 \right)}

\begin{rmk}
What do we mean by separated for a map of stacks? First of all, for a map of algebraic stacks $f : \X \to \Y$ the diagonal $\Delta_f$ is always representable by algebraic spaces (\chref{https://stacks.math.columbia.edu/tag/04XS}{Tag 04XS}) so we can talk about its properties as long as we know about the property for algebraic spaces. It might seem natural to impose that the diagonal is a closed embedding but it turns out this is too restrictive, in particular this will imply that a separated DM-stack is an algebraic space (I THINK) for the following reason.
\end{rmk}

\begin{prop}
The following is a $2$-pullback diagram,
\begin{center}
\begin{tikzcd}
\Isom[\X]{a}{b} \arrow[d] \arrow[r] \pullback & T \arrow[d, "(a \, b)"]
\\
\X \arrow[r, "\Delta"] & \X \times \X
\end{tikzcd}
\end{center}
\end{prop}

\begin{proof}

\end{proof}

\begin{rmk}
In particular, if $\Delta$ is a closed immersion then we require that $\Isom[\X]{a}{b} \to T$ is a closed immersion. Consider the case that $T = \Spec{k}$ then this says that all objects in $\X$ have only trivial automorphisms. In particular, if $\X$ is an algebraic-stack then it is an algebraic space (\chref{https://stacks.math.columbia.edu/tag/04SZ}{Tag 04SZ}). This is clearly not satisfactory.
\end{rmk}

\begin{rmk}
One way to fix this problem is to notice the following: if $f : X \to Y$ is a map of schemes then because $\Delta_{X/Y} : X \to X \times_Y X$ is an immersion always the following are equivalent,
\begin{enumerate}
\item $f$ is separated
\item $\Delta_{X/Y}$ is a closed immersion
\item $\Delta_{X/Y}$ is finite
\item $\Delta_{X/Y}$ is proper
\item $\Delta_{X/Y}$ is universally closed
\item $\Delta_{X/Y}$ is closed.
\end{enumerate}
Therefore, we could take any of these as a definition for stacks and retain the same notion for schemes (and algebraic spaces by similar reasoning). Because topological conditions behave somewhat badly for stacks, finite and proper are the convenient notions. Following the stacks project we take the latter although some authors prefer finiteness of the diagonal. 
\end{rmk}

\begin{defn}
A map of algebraic stacks $f : \X \to \Y$ is,
\begin{enumerate}
\item \textit{separated} if $\Delta_f : \X \to \X \times_{\Y} \X$ is proper 
\item \textit{quasi-separated} if $\Delta_f : \X \to \X \times_{\Y} \X$ is quasi-compact and quasi-separated.
\end{enumerate}
where properties of $\Delta_f$ are in the sense of representable maps.
\end{defn}

\begin{rmk}
There are two ways to know we have the ``correct'' definition of separatedness. The first is that, when the map $f$ is representable by algebraic spaces, this definition agrees with the separated in the sense of representable maps.
\end{rmk}

\begin{lemma}
Let $f: \X \to \Y$ be a representable (by algebraic spaces) morphism of algebraic stacks. Then the following are equivalent,
\begin{enumerate}
\item $f$ is separated in the sense of representable maps
\item $\Delta_f$ is a clsoed immersion
\item $\Delta_f$ is proper
\item $\Delta_f$ is universally closed. 
\end{enumerate}
\end{lemma}

\begin{proof}
This is basically because these properties are the same for maps of algebraic spaces and are preserved under base change. See \chref{https://stacks.math.columbia.edu/tag/04YS}{Tag 04YS} for details. 
\end{proof}

\begin{rmk}
Part of the reason we require $\Delta_f$ to be proper and not just universally closed is that although $\Delta_f$ is automatically finite type it can be nonseparated. For example, let $G$ be a nonseparated group algebraic space over $S = \Spec{k}$ (see \chref{https://stacks.math.columbia.edu/tag/06E9}{Tag 06E9}) and consider $\X = BG = [S/G] \to S$. Then consider,
\begin{center}
\begin{tikzcd}
G \arrow[r] \arrow[d] \pullback & S \arrow[d]
\\
B G \arrow[r, "\Delta"] & B G \times_S B G
\end{tikzcd}
\end{center}
shows that $\Delta$ is not separated.
\end{rmk}

\begin{rmk}
The best reason we know that we have the right notion of separatedness is that the following valuative criterion holds.
\end{rmk}

\begin{prop}
Let $f : \X \to \Y$ be a quasi-separated morphism of algebraic stacks. If $f$ satisfies the uniqueness part of the valuative criterion then $f$ is separated where this criterion is for every $2$-commutative diagram,
\begin{center}
\begin{tikzcd}
\Spec{K} \arrow[r] \arrow[d,"j"] & \X \arrow[d, "f"]
\\
\Spec{A} \arrow[ru, dashed] \arrow[r] & \Y
\end{tikzcd}
\end{center}
with $A$ a valuation ring and $K = \Frac{A}$ the category of maps $\Spec{A} \to \X$ equipped with natural transformations making the diagrams $2$-commute is equivalent to a $(-1)$-cateogry (either empty or one element).
\end{prop}

\begin{rmk}
See \chref{https://stacks.math.columbia.edu/tag/0CL9}{Tag 0CL9} we define what this uniqueness criterion means. The category of dotted arrows has objects $(a, \alpha, \beta)$ where $a : \Spec{A} \to \X$ is a morphism and $\alpha : a \circ j \to x$ and $\beta : y \to f \circ a$ are two morphisms witnessing the commutativity of the triangles. These must be compatible in the sense that,
\begin{center}
\begin{tikzcd}
& f \circ a \circ j \arrow[rd, "\id_f * a"] 
\\
y \circ j \arrow[ru, "\beta * \id_j"] \arrow[rr, "\gamma"] & & f \circ x
\end{tikzcd}
\end{center}
commutes. A morphism $(a, \alpha, \beta) \to (a', \alpha', \beta')$ is a $2$-arrow $\theta : a \to a'$ compatible with commutativity meaning $\alpha = \alpha' \circ (\theta * \id_j)$ and $\beta = (\id_f * \theta) \circ \beta$. 
\end{rmk}

\subsection{The Stack of All Curves}

\newcommand{\Mall}{\mathcal{M}^{\text{all}}}

\begin{rmk}
Work in the category of $k$-schemes so all our stacks are equipped with a forgetful map to $\Spec{k}$. 
\end{rmk}

\begin{defn}
The stack of all curves $\Mall$ is the fibered category of flat proper finitely presented morphism of algebraic spaces $\pi : \C \to S$ whose geometric fibers are $1$-dimensional.
\end{defn}

\begin{example}
Consider $A = k[[t]]$ and $K = \Frac{A} = k((t))$. Then consider,
\[ X = \Proj{A[x,y,z]/(z y^2 - x^3 - t^4 x z^2)} \to \Spec{A} \] 
which is flat because it is an integral scheme over a DVR and hence torsion-free as an $A$-module. The special fiber,
\[ X_k \cong \Proj{k[x,y,z]/(z y^2 - x^3)} \]
is a nodal curve while the generic fiber,
\[ X_k \cong \Proj{K[x,y,z]/(z y^2 - x^3 - t^4 x z^2)} \cong \Proj{K[x,y,z]/(z y^2 - x^3 - x z^2} \cong E_K \]
where the isomorphism takes,
\[ x \mapsto t^2 x \quad y \mapsto t^3 y \quad z \mapsto z \]
is an elliptic curve base changed from the elliptic curve over $k$,
\[ E = \Proj{k[x,y,z]/(z y^2 - x^3 - x z^2)} \]
Therefore, this shows that $\Mall$ is not separated because it violates the valuative criterion,
\begin{center}
\begin{tikzcd}
\Spec{K} \arrow[r, "x"] \arrow[d, "j"'] & \Mall \arrow[d, "f"]
\\
\Spec{A} \arrow[ru, dashed] \arrow[r, "y"] & \Spec{k}
\end{tikzcd}
\end{center}
Such a diagram corresponds to a curve $C \to \Spec{K}$ and because $\Spec{k}$ is a scheme there are no nontrivial $2$-morphisms so the square is commutative with a unique $2$-morphism $\gamma = \id$. Lifts are tripples $(a, \alpha, \beta)$ where $a$ corresponds to a curve $\C \to \Spec{A}$ and $\alpha : a \circ j \to x$ is an isomorphism $\alpha : \C_K \to C$ over $K$ and $\beta : y \to f \circ x$ must be the identity because $\Spec{k}$ is representable. Finally these much satisfy,
\[ \gamma = (\id_f * \alpha) \circ (\beta * \id_j) \]
which is automatic because these are $2$-morphisms on $\Spec{k}$ (also $\gamma = \id$ and $\beta = \id$ and $\id_f * \alpha = \id$ since $\Mall \to \Spec{k}$ collapses all isomorphisms to $\id$). Therefore, the category of arrows is equivalent to the category of curves $\C \to \Spec{A}$ equipped with an isomorphism $\alpha : \C_K \to C$ with morphismsas isomorphisms of families respecting the identification of the special fiber. Therefore, this is exactly the category of models. However, above we have $X$ and $E_A$ which are nonisomorphic models (have nonisomorphic generic fibers) so $\Mall$ is not separated. 
\bigskip\\
Here is another way to understand the failure of separatedness in this example. The models $X, E_A$ determine morphisms $a,b : \Spec{A} \to \Mall$ so consider,
\begin{center}
\begin{tikzcd}
\Isom[A]{X}{E_A} \arrow[d] \arrow[r] \pullback & \Spec{A} \arrow[d]
\\
\Mall \arrow[r] & \Mall \times_k \Mall 
\end{tikzcd}
\end{center}
and we know $\Isom[A]{X}{E_A}$ is nonempty over the generic fiber but empty on the special fiber so its image in $\Spec{A}$ is not closed and hence $\Isom[A]{X}{E_A} \to \Spec{A}$ is not proper proving that $\Delta_f$ is not proper.
\end{example}

\begin{rmk}
The semi-stable reduction theorem tells us that a semi-stable reduction when it exists is always unique and also after a finite extension does exist. This proves the uniqueness and existence parts of the valuative criteria for properness for the stack of semi-stable curves. 
\end{rmk}

\section{Moduli of Smooth Fanos}

\begin{defn}
A family of smooth fanos is a smooth proper finitely presented morphism $\pi : X \to S$ such that each fiber $X_s$ is a smooth Fano meaning a smooth projective variety with ample $\omega_{X_s}^\vee$.  
\end{defn}

\section{Isotrivial Families}

\begin{defn}
A \textit{polarized family} if a proper, flat, finitely presented morphism $\pi : X \to S$ equipped with a relatively ample invertible sheaf $\L$ on $X$. A morphism of polarized families is a cartesian diagram,
\begin{center}
\begin{tikzcd}
X' \arrow[r] \arrow[d, "f"] & X \arrow[d]
\\
S' \arrow[r, "g"] & S
\end{tikzcd}
\end{center}
and an isomorphism $\varphi : f^* \L \to \L'$. 
\end{defn}

\begin{rmk}
Since $\pi : X \to T$ is finte type and $\L$ is $\pi$-relatively ample there is a (Zariski) open cover $T_i \to T$ such that $\L$ is ample for $X_i \to T_i$ and thus we get a closed embedding $X_i \embed \P^N_{T_i}$ over $T_i$ defined by $\L^{\ot n_i}$ for some $n_i > 0$. Therefore, $\pi$ is locally projective (in the sense of Hartshorne). 
\end{rmk}

\newcommand{\pol}{\mathrm{pol}}


\begin{defn}
The stack of polarized proper schemes $\M_{\pol}$ is the stack of polarized families. Explicitly, it is the category fibered over $(\Sch_{\Z})_{\fppf}$ whose objects are pairs $(X \to S, \L)$ with,
\begin{enumerate}
\item $X \to S$ a proper, flat, finitely presented morphism
\item $\L$ an invertible $\struct{X}$-module relatively ample for $X \to S$
\end{enumerate}
and morphisms $(X' \to S', \L') \to (X \to S, \L)$ are given by $(f,g,\varphi)$ with,
\begin{enumerate}
\item $f : X' \to X$ and $g : S' \to S$ morphisms of schemes such that,
\begin{center}
\begin{tikzcd}
X' \arrow[r, "f"] \arrow[d] & X \arrow[d]
\\
S' \arrow[r, "g"] & S
\end{tikzcd}
\end{center}
is a commutative cartesian diagram,
\item $\varphi : f^* \L \to \L'$ is an isomorphism.
\end{enumerate}
\end{defn}

\begin{thm}
The fibered category $\M_{\pol}$ is a locally noetherian algebraic stack and the canonical morphism $\M_{\pol} \to \Spec{\Z}$ is quasi-separated and locally of finite presentation.
\end{thm}

\begin{proof}
See \chref{https://stacks.math.columbia.edu/tag/0D4X}{Tag 0D4X} and \chref{https://stacks.math.columbia.edu/tag/0DPU}{Tag 0DPU}.
Then $\M_{\pol}$ is locally noetherian because $\Spec{\Z}$ is and we apply \chref{https://stacks.math.columbia.edu/tag/06R6}{Tag 06R6}. 

DO THE IDEA!!
\end{proof}

\begin{lemma}
The morphism $\I_{\M_{\pol}} \to \M_{\pol}$ is quasi-compact.
\end{lemma}

\begin{proof}
For each morphsim $T \to \M_{\pol}$ from a scheme defining a polarized family $(X \to T, \L)$ we get the $2$-fiber square,
\begin{center}
\begin{tikzcd}
\Aut[\M_\pol]{X} \arrow[d] \arrow[r] & T \arrow[d]
\\
\I_{\M_{\pol}} \arrow[r] & \M_{\pol}
\end{tikzcd}
\end{center}
therefore it suffices to show that $\Aut[\M_\pol]{X} \to T$ is quasi-compact. Since quasi-compactness is local on the base, we may assume that $\pi : X \to T$ is projective with $X \embed \P^n_T$ via $\L$. Since polarized automorphisms of $X$ fix $\L$ we see that any automorphism of $X$ extens to an automorphism of $\P^n_T$ giving a map of sheaves,
\[ \Aut[\M_\pol]{X} \to \PGL_{n+1} \]
whose kernel is given by automorphisms of $X$ which fix $\P^n_T$ and hence of the form $(\id, \id, \varphi)$ where $\varphi : \L \to \L$ is an automorphism. Therefore, we get a sequence,
\begin{center}
\begin{tikzcd}
1 \arrow[r] & \Gm \arrow[r] & \Aut[\M_\pol]{X} \arrow[r] & \PGL_{n+1} 
\end{tikzcd}
\end{center}
(DO TRANSPORTERS EXIST IN GENRAL?)
\end{proof}

\begin{rmk}
This is quite special to automorphisms of polarized varieties. For example, $A = E \times E$ where $E$ is an ordinary elliptic curve has $\Aut{A} = \GL_2(\Z)$ which is not quasi-compact but $A$ has finitely many polarized automorphisms. 
\end{rmk}

\newcommand{\cZ}{\mathcal{Z}}

\begin{lemma}
Let $\X$ be a locally noetherian algebraic stack then for each $x \in |X|$ the residual gerbe $\cZ_x$ of $\X$ at $x$ exists and $\cZ_x \to \X$ is a closed embedding.
\end{lemma}

\begin{proof}

\end{proof}

\begin{cor}
For each $x \in | \M_{\pol} |$ the residual gerbe $\cZ_x$ of $\M_{\pol}$ at $x$ exists and $\cZ_x \to \M_{\pol}$ is a closed embedding.
\end{cor}

\begin{proof}
Using lemma \chref{https://stacks.math.columbia.edu/tag/06UH}{Tag 06UH}. 

DO THE IDEA
\end{proof}

\subsection{Using the Gerbes}

\begin{lemma}
Let $\X$ be a reduced algebraic stack and $\Y$ be a locally noetherian algebraic stack with $y \in |\Y|$ is a closed point. Let $f : \X \to \Y$ be a morphism of stacks such that $f(|\X|) = \{ y \}$ then there is a factorization,
\begin{center}
\begin{tikzcd}
\X \arrow[rd] \arrow[rr, "f"] & & \Y
\\
& \Z_y \arrow[ru]
\end{tikzcd}
\end{center}
\end{lemma}

\begin{proof}
Because $\Z_y \embed \Y$ is a closed substack with $|\Z_y| = \{ y \}$, we can apply \chref{https://stacks.math.columbia.edu/tag/050B}{Tag 050B}.
\end{proof}

\begin{prop}
Let $f : T \to \X$ be a morphism from a reduced noetherian Jacobson scheme to a locally noetherian algebraic stack 
\end{prop}

\subsection{WORK TO DO}

Here is a problem, because of the extra $\Gm$ factor the DM-locus is empty. We would like to consider the DM-locus inside here and see the stack of curves living inside or something. Can we rigidify this stack somehow. What sort of level structure will kill these automorphisms of the line bundle. 

\section{Is Syntomic the topology that was promised?}

I want the smallest topology containing $\Spec{A[x]/(x^p - a)} \to \Spec{A}$ in characteristic $p$ and Zariski covers. I would also be interested in the ``finite'' version of this topology.
\bigskip\\
Perhaps there is a good notion of a ``finite flat topology''. 


\section{Connections on Principle Bundles}

\newcommand{\ad}{\mathrm{ad}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\cO}{\mathcal{O}}

\begin{prop}
Let $\pi : G \to S$ be a group scheme. Then,
\[ \Omega_{G/S} = \pi^* e^* \Omega_{G/S} \]
so if we set,
\[ \omega_{G/S} = e^* \Omega_{G/S} \]
then,
\[ \Omega_{G/S} = \pi^* \omega_{G/S} \]
Furthermore, by the projection form,
\[ \pi_* \Omega_{G/S} = \omega_{G/S} \ot_{\struct{S}} \struct{G} \]
and thus if $\pi$ is $\cO$-connected (e.g. for $G / S$ an abelian scheme) then,
\[ \pi_* \Omega_{G/S} = \omega_{G/S} \]
\end{prop}

\begin{proof}
Consider the Cartesian diagram,
\begin{center}
\begin{tikzcd}
G \times_S G \arrow[rrd, bend left, "m"] \arrow[rdd, bend right, "\pi_1"] \arrow[rd, dashed]
\\
& G \times_S G \arrow[d, "\pi_1"] \arrow[r, "\pi_2"] & G \arrow[d]
\\
& G \arrow[r] & S
\end{tikzcd}
\end{center}
because the dashed arrow is an isomorphism, the outside square is Cartesian so $m^* \Omega_{G/S} = \pi_1^* \Omega_{G/S}$. Then,
\[ \pi^* e^* \Omega_{G/S} = (e \circ \pi, \id)^* \pi_1^* \Omega_{G/S} = (e \circ \pi, \id)^* m^* \Omega_{G/S} = \id^* \Omega_{G/S} = \Omega_{G/S} \]
\end{proof}

\begin{rmk}
If $S = \Spec{k}$ then $\omega_{G/S} = \g$ is the Lie algebra. 
\end{rmk}

\begin{defn}
Let $P$ be an object on an $S$-scheme $\pi : X \to S$. Then an $S$-connection on $P$ is an isomorphism $\varphi : \pi_1^* P \to \pi_2^* P$ of objects over $X^{(1)}$ such that $\Delta^* \varphi = \id$ where,
\[ X^{(1)} \embed X \times_S X \]
is the first infinitesimal diagonal. Consider,
\[ X \embed X \times_S X \times_S X \]  
and the first-order neighborhood $X^{(1)}_3$ equipped with three projections $\pi_{ij} : X^{(1)}_3 \to X^{(1)}$. We say that $\varphi$ is \textit{integrable} if it satisfies the cocycle condition,
\[ \pi_{23}^* \varphi \circ \pi_{12}^* \varphi = \pi_{13}^* \varphi \] 
\end{defn}

\begin{prop}
Let $G \to S$ be a smooth group scheme and $\pi : P \to X$ be a $G$-bundle. Consider the sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \pi^* \Omega_{X/S} \arrow[r] & \Omega_{P/S} \arrow[r] & \Omega_{P/X} \arrow[r] & 0
\end{tikzcd}
\end{center}
This is an exact sequence of descent data and therefore arises as $\pi^*$ of an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \Omega_X \arrow[r] & Q \arrow[r] & \ad(P) \arrow[r] & 0
\end{tikzcd}
\end{center}
where $\ad(P)$ is the adjoint bundle,
\[ \ad(P) = P \times_G \omega_{G/S} \]
defined via the adjoint action of $G$ on $\omega_{G/S}$. 
\end{prop}

\section{When are Flag Varities Toric?}

Let $G$ be a simple reductive group and $P \subset G$ a parabolic subgroup. When is the flag variety $G / P$ toric? We know that any algebraic group is unirational (at least if $G$ is reductive or $k$ is perfect see Lemma 7.2.3 in Brian's second course) and thus $G/P$ is unirational so it might seem reasonable that it could be toric. 


\begin{prop}
If $G$ is simple with trivial center and $P \subset G$ is a parabolic subgroup then $\Aut{G/P} = G \rtimes A$ where $A$ is a finite group determined by the automorphisms of the Dynkin diagram of $G$ except for the following exceptional cases,
\begin{enumerate}
\item $X = G_2 / U_2$ where $\rm{Aut}^0(X) = \SO_7$

\item $X = \Sp_{r} / \Sp_{r-1} U_1$ where $\rm{Aut}^0(X) = \PSL_{2r}$

\item $X = \SO_{2n+1} / U_n$ where $\rm{Aut}^0(X) = \mathrm{PSO}_{2n + 2}$.
\end{enumerate}
\end{prop}

\begin{proof}
There is a reference \chref{https://mathoverflow.net/questions/160292/automorphism-group-of-flag-manifolds}{here}.
\end{proof}

Therefore, except for these cases the maximal torus of $\Aut{X}$ is the maximal torus $T \subset G$. Hence if $\dim{T} < \dim{G/P}$ then it is impossible for $G/P$ to be toric. For example, let $G = \PGL_n$ and $B \subset G$ the standard Borel so that $G/B$ is the complete flag variety. Then $\dim{T} = n-1$ and $\dim{G/B} = \tfrac{1}{2} n(n-1)$ so we see that,
\[ \dim{T} < \dim{G/B} \iff n > 2 \]
and indeed for $n = 2$ we get $G/B = \P^1$ which is toric.  
\bigskip\\
This proves that projective bundles over toric varieties need not be toric. Indeed, $F_n = \PGL_n / B$ is an iterated projective bundle over $\Spec{k}$ and hence at some point a projective bundle must take a toric variety to a non-toric variety since $F_n$ is not toric for $n > 2$. For $n = 3$ we get a counter-example for the projectivization of a rank $2$ vector bundle on $\P^2$ in fact $F_3 = \P_{\P^2}(\mathcal{Q})$ where $\mathcal{Q} = \Omega_{\P^2}(1)$ is the canonical subbundle and $\P^2$ is toric but $F_3$ is not toric by the above discussion. 

\section{May 27 Orders of Points on genus $1$ curves}

\newcommand{\ind}{\operatorname{ind}}
\newcommand{\radix}{\operatorname{radix}}
\newcommand{\per}{\operatorname{per}}

\begin{defn}
Let $X \to \Spec{k}$ be a $k$-scheme. For a point $x \in X$, let $\deg(x) = [\kappa(x) : k]$ and,
\begin{enumerate}
\item $\radix{X} = \min \{ \deg{x} \mid x \in X \}$
\item $\ind{X} = \gcd \{ \deg{x} \mid x \in X \}$.
\end{enumerate}
\end{defn}

\begin{prop}
Let $G$ be a $k$-group and $T$ a $G$-torsor. Then $\ind{T}$ is the gcd of the degrees of all extensions such that $T$ becomes trivial.
\end{prop}

\begin{proof}
$T_{k'}$ is trivial iff $T(k') \neq \empty$ proving the claim. 
\end{proof}

\begin{prop}
If $T \in H^1(k, G)$ is torson, denote its order $\per{T}$, then $\per{T} \divides \ind{T}$.
\end{prop}

\begin{proof}
It suffices to show that if $T_{k'}$ is trivial then $\per{T} \divides [k' : k]$. Indeed, using that,
\[ H^1(k, G) \lmap{\mathrm{res}} H^1(k', G) \lmap{\mathrm{cor}} H^1(k, G) \]
is multiplication by $n = [k' : k]$ we see that $T \in H^1(k, G)[n]$ and hence its order $\per{T} \divides n$.
\end{proof}

\begin{prop}
Let $C$ be a genus $1$ curve over a field $k$. Then $\forall x \in C : \ind(C) \divides \deg{x}$ so in particular $\radix{C} = \ind{C}$.
\end{prop}

\begin{proof}
Let $x \in C$ be a point achiving the minimum and $y \in C$ another point. Assume the theorem is false then $\gcd(\deg{x}, \deg{y}) < \deg{x}$. Therefore, there is a divisor,
\[ D = p [x] + q [y] \]
for $p,q \in \Z$ such that $0 < \deg{D} < \deg{x}$. Then by Riemann-Roch,
\[ h^0(C, \struct{C}(D)) = \deg{D} > 0 \]
meaning that $D$ is equivalent to an effective divisor proving there is some point with smaller degree than $x$. 
\end{proof}

\begin{prop}
Let $k$ be a field and $E$ an elliptic curve over $k$ such that for every finite extension $k'/k$ and all sufficiently large primes $p \gg 0$ the abelian group $k'^\times / (k'^\times)^n$ is infinite and $E(k) / p E(k)$ is finite (e.g. $k$ is a number field and $E$ is any elliptic curve). Then for any $n > 0$ there is an $E$-torsor $C$ with $\ind{C} \ge n$.
\end{prop}

\begin{proof}
It suffices to prove that for any sufficiently large prime $\ell$ there is a nontrivial $C \in H^1(k, E)[\ell]$ since then $\per{C} = \ell$ and thus $\ind{C} \ge \ell$. Choose $\ell$ large enough to be invertible in $k$ (i.e. not the characteristic) then consider the sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & E[n] \arrow[r] & E \arrow[r, "n"] & E \arrow[r] & 0
\end{tikzcd}
\end{center}
exact in the \etale topology. Thus we find an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & E(k) / \ell E(k) \arrow[r] & H^1(k, E[\ell]) \arrow[r] & H^1(k, E)[\ell] \arrow[r] & 0
\end{tikzcd}
\end{center}
Since the first term is finite, to show that $H^1(k, E)[\ell] \neq 0$ it suffices to show that $H^1(k, E[\ell])$ is infinite. Let $k'/k$ be a field extension such that $E[\ell]$ is split and $k'$ has all $\ell^{\text{th}}$-roots of unity. Then from the inflation-restriction sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & H^1(\Gal{k'/k}, E[\ell]^{G_{k'}}) \arrow[r] & H^1(k, E[\ell]) \arrow[r] & H^1(k', E[\ell]) \arrow[r] & H^2(\Gal{k'/k}, E[\ell]^{G_{k'}})
\end{tikzcd}
\end{center}
However, $\Gal{k/'k}$ is finite and $E[\ell]^{G_{k'}}$ is a finite abelian group (equipped with the trivial action) so $H^1(\Gal{k'/k}, E[\ell]^{G_{k'}})$ and $H^2(\Gal{k'/k}, E[n]^{G_{k'}})$ are finite. Therefore, $H^1(k, E[\ell])$ is infinite iff $H^1(k', E[\ell]) = \Hom{}{G_{k'}}{E[\ell]}$ is infinite. However, $E[\ell]_{k'} \cong (\Z / \ell \Z)^2 \cong \mu_\ell^2$ and therefore from the Kummer sequence, 
\[ H^1(k', \mu_\ell) = (k'^\times) / (k'^\times)^\ell \]
is infinite proving that $H^1(k', E[\ell])$ is infinite.
\end{proof}


\begin{rmk}
Can we strengthen the statement to $\ind{C} = n$?
\end{rmk}

\section{Alternative Proofs for the HW}

\begin{lemma}
Let $A$ be a Noetherian domain with $\dim{A} = 1$ and $\p \subset A$ a nonzero prime. Then there exists $f \in \Frac{A}$ with $f \notin A_\p$ but $f \in A_\q$ for all primes $\q \neq \p$.
\end{lemma}

\begin{proof}
Let $K = \Frac{A}$ and take any $f \in \Frac{K}$ such that $f \notin A_\p$ (e.g. $p^{-1}$ for any $p \in \p$). Consider the ideal
\[ I = (A : f) = \{ x \in A \mid x f \in A \} \]
Then if $x \in I$ we have $x f \in A$ so if $x \in A \setminus \p$ then $f = \frac{xf}{x} \in A_\p$. Since $f \notin A_\p$ we must have $I \subset \p$. Since $A$ is Noetherian and $I$ is proper it has a primary decomposition,
\[ I = \q_0 \cap \q_1 \cap \cdots \cap \q_n \]
such that $\q_i$ is $\p_i$-primary. Therefore,
\[ \sqrt{I} = \sqrt{\q_0} \cap \cdots \cap \sqrt{\q_n} = \p_0 \cap \cdots \cap \p_n \]
which implies that $\p_0 \dots, \p_n \in V(I)$. Furthermore, $\dim{A} = 1$ so each prime $\p_i$ is maximal and thus $V(I) = \{\p_0, \dots, \p_n \}$ since if some prime $\q \supset I$ then $\q \supset \sqrt{I}$ and thus $\q \supset \p_0 \cap \cdots \cap \p_n$ but $\q$ is prime so $\q \supset \p_i$ for some but $\p_i$ is maximal so $\q = \p_i$. In particular there are a finite number of primes above $I$ and since $\p \in V(I)$ we can take $\p_0 = \p$ WLOG. 
\bigskip\\
By prime avoidance $\p_i \not\subset \bigcup_{j \neq i} \p_j$ and thus there exist elements, $a_i \in \p_i \setminus \bigcup_{j \neq i} \p_j$. Then let $\tilde{a} = \prod_{i = 1}^n a_i$ and thus $a_0 \tilde{a} \in \p_0 \cap \cdots \cap \p_n = \sqrt{I}$ so $(a_0 \tilde{a})^N \in I$ for some positive integer $N$. Consider $I' = (A : \tilde{a}^N f) \supset I$. Since $a_0^N \tilde{a}^N \in I$ we know that $a_0^N (\tilde{a}^N f) \in A$ so $a_0^N \in I'$. However, $a_0 \notin \p_i$ for $i > 0$ and thus neither is $a_0^N$ so $I' \not\subset \p_i$ for $i > 0$. But since $I' \supset I$ we have $V(I') \subset V(I)$ so $V(I') = \{ \p \}$. Furthermore, 
\[ g \in A_\q \iff \exists s \in A \setminus \q : s g \in A \iff (A : g) \not\subset \q \] 
Therefore $a_0^N f \notin A_\p$ but $a_0^N f \in A_\q$ for each prime $\q \neq \p$.  
\end{proof}

\begin{prop}
If $A$ is a Noetherian domain with $\dim{A} = 1$ and $\p \subset A$ nonzero prime. Then $\p^{-1} \neq A$.
\end{prop}

\begin{proof}
Choose $f$ as above such that $f \notin A_\p$ but $f \in A_{\q}$ for all $\q \neq \p$. Since $\dim{A_\p} = 1$ and $A_\p$ is local we know that for any nonzer $a \in A_\p$ we have $\sqrt{(a)} = \p^n$. Therefore, there is some $n$ such that $f \p^n \subset A$. Choose $n$ minimal. Then $f \p^{n-1} \not\subset A$ so choose some $x \in f \p^{n-1} \sm A$ but $x \p \subset A$ because $f \p^n \subset A$ so $x \in \p^{-1} \sm A$ proving the claim.
\end{proof}

\begin{rmk}
If $A = k[t^2, t^3] \subset k[t]$ and $\p = (t^2, t^3)$ then $\p^{-1} = \wt{A}$ so $t \in \p^{-1}$ meaning $\p^{-1} \neq A$ but $\p^{-1}$ is contained in the normalization $\wt{A}$. However, notice that $\p \p^{-1} = \p$. Indeed, this is the generic behavior in the following sense.
\end{rmk}

\begin{prop}
Let $A$ be a Noetherian domain with $\dim{A} = 1$ and $\p \subset A$ a nonzero prime. Suppose $\p \p^{-1} \subsetneq A$ then $\p^{-1} \subset \wt{A}$. In particular $\p^{-1} \sm A$ which is nonempty, consists of integral elements which do not lie in $A$.
\end{prop}

\begin{proof}
Suppose $\p \p^{-1} \subsetneq A$. Since $\p \p^{-1}$ is an ideal containing $\p$ and $\p$ is maximal then $\p \p^{-1} = \p$ so $\p^{-1} = B$ is a ring since if $x,y \in B$ then $xy \p \subset x \p \subset \p$ so $xy \in B$. However, $\p^{-1}$ is a fractional ideal and hence a finite $A$-module so $B$ is integral over $A$ and $B \subset K$ so $B \subset \wt{A}$.
\end{proof}

\section{Gimbal Lock}

\begin{lemma}
A submersion $f : M \to N$ between compact connected manifolds is a fiber bundle.
\end{lemma}

\begin{proof}
To apply Ehresmann's theorem we need to show that $f$ is proper and surjective. Indeed, since $M$ is compact $f$ is automatically proper (preimage of a compact set is closed and hence compact). Furthermore, $f(M)$ is closed because $M$ is compact but $f$ is a submersion and hence open (since it is an $\R^n$-bundle locally on the source) so $f(M)$ is clopen and $N$ is connected so $f(M) = N$.
\end{proof}

We are wondering if there are surjective submersions $M = (S^1)^n \to \RP^3$. It is automatically a fiber bundle. For $n = 3$ this is a covering map so injective on $\pi_1$ which is impossible. For $n = 4$ it is a fiber bundle and the fiber $F$ is a compact $1$-manifold and hence $F = S^1$. Consider the fibration sequence,
\begin{center}
\begin{tikzcd}
\pi_1(F) \arrow[r] & \pi_1(M) \arrow[r] & \pi_1(\RP^3) \arrow[r] & 1
\end{tikzcd}
\end{center}
but this gives an exact sequence,
\[ \Z \to \Z^4 \to \Z / 2 \Z \to 0 \]
which is impossible. For $n = 5$ the fiber $F$ is a compact surface. Then consdier the exact sequence,
\begin{center}
\begin{tikzcd}
\pi_3(\RP^3) \arrow[r] & \pi_2(F) \arrow[r] & \pi_2(M) \arrow[r] & \pi_2(\RP^3) \arrow[r] & \pi_1(F) \arrow[r] & \pi_1(M) \arrow[r] & \pi_1(\RP^3) \arrow[r] & 1
\end{tikzcd}
\end{center}
which gives,
\begin{center}
\begin{tikzcd}
\Z \arrow[r] & \pi_2(F) \arrow[r] & \pi_2(M) \arrow[r] & 0 \arrow[r] & \pi_1(F) \arrow[r] & \pi_1(M) \arrow[r] & \Z/2\Z \arrow[r] & 1
\end{tikzcd}
\end{center}
but the map $\pi_1(F) \to \pi_1(M)$ needs to be injective and index $2$. This is impossible since $\pi_1(M) = \Z^5$ but $\pi_1(F)$ is nonabelian if it has rank bigger than $2$. We could keep going but this is clearly unsustainable. 
\bigskip\\
Next thing to try is go to universal covers,
\begin{center}
\begin{tikzcd}
\R^n \arrow[d] \arrow[r, dashed] & S^3 \arrow[d]
\\
M \arrow[r] & \RP^3
\end{tikzcd}
\end{center}
Since $M \to \RP^3$ is a surjective submersion so is $f : \R^n \to S^3$. So we ask the following question,
\begin{rmk}
For which $m,n$ do there exist surjective submersions $\R^m \to S^n$?
\end{rmk}
The problem is these exist for all $m \ge n$ and are clearly impossible for $m < n$. Indeed, since $S^n$ is geodesically complete, the map $\exp : \R^n \to S^n$ is a surjective submersion and we can simply compose with the projection $\R^m \onto \R^n$.
\bigskip\\
Ah but notice since $M \to \RP^3$ is a fibratio then $\R^n \to \RP^3$ is also a fibration. So the lift to $S^3$ should also be a fibration (check this). Then we see that the homotopy fiber is $\Omega S^3$ which is not homotopy equivalent to a manifold (infinite cohomology amplitude). 
\bigskip\\
Another strategy is to take the fiber product,
\begin{center}
\begin{tikzcd}
\wt{M} \arrow[d] \arrow[r] \pullback & S^3 \arrow[d]
\\
M \arrow[r] & \RP^3
\end{tikzcd}
\end{center}
which is a manifold since the maps are surjective submersions. Then by coversing space theory $\wt{M} \cong (S^1)^n$ also since the finite index subgroups of $\Z^n$ are all isomorphic to $\Z^n$. Therefore, we reduce to a surjective submersion $M \to S^3$. This is better because $S^3$ is simply connected so we don't need to mess around with local coefficients when we apply the Serre spectral sequence. Since $M \to S^3$ is a fiber bundle by Ehresman's theorem we consider the following situation, what are the possible fiber bundles,
\[ F \to (S^1)^n \to S^m \]
we have the Serre spectral sequence,
\[ E^{p,q}_2 = H^p(S^m, H^q(F)) \implies H^{p+q}(M) = [H^\bullet(S^1)^{\otimes n}]^{p+q} \]
By the universal coeffiicent theorem, there is an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \Ext{1}{\Z}{H_{p-1}(S^m)}{H^q(F)} \arrow[r] & H^p(S^m, H^q(F)) \arrow[r] & \Hom{\Z}{H_p(S^m)}{H^q(F)} \arrow[r] & 0
\end{tikzcd}
\end{center}
but since $H_i(S^m)$ is a free $\Z$-module, the first term dies and we see that,
\[ H^p(S^m, H^q(F)) = \begin{cases}
H^q(F) & p = 0,m
\\
0 & \text{else}
\end{cases} \]
Therefore, the spectral sequence has two columns. This gives the Wang sequence,
\begin{center}
\begin{tikzcd}
\cdots \arrow[r] & H^{i-1}(F) \arrow[r, "\partial"] & H^{i-m}(F) \arrow[r, "\alpha"] & H^i(M) \arrow[r, "\iota^*"] & H^i(F) \arrow[r, "\partial"] & H^{i+1-m}(F) \arrow[r] & \cdots
\end{tikzcd}
\end{center}
In a bounded spectral sequence we also have the following ``Euler characteristic'' formula, given,
\[ E^{p,q}_2 \implies H^{p+q} \]
we have,
\[ \sum_{n \ge 0} (-1)^n \dim{H^{p+q}} = \sum_{p,q \ge 0} (-1)^{p+q} \dim{E^{p,q}_r} \]
Therefore, in the cases when,
\[ H^p(B, H^q(F)) = H^p(B) \otimes H^q(F) \]
as does in the case that $X = S^m$ then we see that,
\[ \chi(E) = \chi(B) \cdot \chi(F) \]
In particular, we have,
\[ \chi(S^m) \cdot \chi(F) = \chi(M) = \chi((S^1)^n) = \chi(S^1)^n = 0 \]
Therefore, if $m$ is even we must have $\chi(F) = 0$. Okay this is not so helpful. 
\bigskip\\
Let's actually go back to the fibration homotopy exact sequence. Notice that the map $\pi_k(M) \to \pi_k(S^m)$ is always zero for $m > 1$. This is somehow supposed to imply that the homotopy fiber $F$ is (rationally) homotopy equivalent to $M \times \Omega S^m$ (I'm not sure why) but the homology of this is not finite support and thus $F$ cannot be homotopic to a manifold meaning $M \to S^m$ cannot be a submersion. 
\bigskip\\
Maybe we can see this from the Wang sequence. For large $i$ we have $H^i(M) = 0$ so we get $H^{i}(F) \iso H^{i+1-m}(F)$ which shifts up dimension infinitely if we can get it nonzero in the range $i > \dim{M}$. Therefore, we should consider $i = \dim{M} = n$. Then $H^n(M) \neq 0$ but if we assume $H^n(F) = 0$ (it is a lower dimensional submanifold) so indeed we have $H^{n-m}(F) \onto H^n(M)$ is an isomorphism (fundamental classes) so HMMM seems hard !!!

\section{Orientation-Reversing Maps}

The rational Pontryagin classes are topological invariants in the following sense. If $f : X \to Y$ is a diffeomorphism then $f^* p_i(Y) = p_i(X)$ using the map $f^* : H^{4i}(Y, \Q) \to H^{4i}(X, \Q)$. However, notice that this does not exactly mean that Pontryagin numbers are preserved because of orientation issues. If $f : X \to X$ is orientation reversing then it reverses the Pontryagin numbers. 
\bigskip\\
Indeed, $p_1 = c_1(X)^2 - 2 c_2(X)$. Say $X$ is a $2$-dimensional complex manifold. Then $p_1 \in H^4(X, \Q)$ so there is a canonical $\deg{p_1} \in \ZZ$ which is given the orientation on $X$. Hovever, there exist orientation-reversing homeomorphisms $f : X \to X$ which means $f^* p_1 = -p_1$. This means that if we transport the complex structure along $f$ we get a complex manifold $X'$ such that $p_1(X') = -p_1(X)$. Since $c_2(X) = \chi(X)$ is a topological invariant we see that,
\begin{enumerate}
\item $c_2(X') = c_2(X)$
\item $c_1^2(X') = 4 c_2(X) - c_1^2(X)$
\end{enumerate}
such that $p_1(X') = - p_1(X)$. Indeed, this is theorem 9 of ``TOPOLOGICALLY INVARIANT CHERN NUMBERS OF PROJECTIVE VARIETIES''. 

\section{fpqc sheaf that does not sheafify}

\newcommand{\Set}{\mathrm{Set}}

\begin{rmk}
A reference for this is: BASICALLY BOUNDED FUNCTORS AND FLAT SHEAVES by WILLIAM C. WATERHOUSE.
\end{rmk}

The fpqc site has the problem that given a scheme $X$, there is no cofinal \textit{set} of fpqc covers of $X$.
\bigskip\\
Indeed, consider $X = \Spec{k}$. Then let $X_I = \Spec{k(t_i)_{i \in I}}$ for any index set. Then consider,
\[ \{ X_I \to X \}_{I \in \Set} \]
raning over all sets which is an fpqc cover. Any refinement of this cover $\{ V_j \to X \}_{j \in J}$ by a set $J$ must have for each $I$ there is some $j$ such that $V_j \to X_I \to X$ factors $V_j \to X$ but then $\Spec{k(t_i)_{i \in I}} \to V_j$ menaing that $V_j$ has a point with residue field $\# \kappa(x) \ge \# I$ and thus the residue fields of the schemes $V_j$ must have unbounded cardinality. This is impossible if $J$ is a set since each scheme has a set of residue fields.

\begin{defn}
Consider the presheaf $F : \mathrm{Sch}_{\text{fpqc}} \to \Set$ defined as follows,
\[ F(X) \to \{ \text{locally constant } f : X \to \mathrm{Card} \mid f(x) \le \# \kappa(x) \} \]
where $\mathrm{Card}$ is the proper class of all cardinals. If $f : X \to Y$ is a map then $\kappa(f(x)) \embed \kappa(x)$ so the pullback $F(Y) \to F(X)$ is well-defined.
\end{defn}

\begin{rmk}
It is not immediately apparent that $F$ is set (rather than proper class) valued. Indeed, since the scheme $X$ has a set of points and hence $\# \kappa(x)$ for $x \in X$ is bounded by some cardinal $\lambda$ and then,
\[ F(X) = \{ \text{locally constant } f : X \to \lambda \mid f(x) \le \# \kappa(x) \} \]
which is a set.
\end{rmk}

\begin{prop}
$F$ has no fpqc-sheafification.
\end{prop}

\begin{proof}
Suppose there was a sheaf $G$ and a universal morphism $\varphi : F \to G$. Furthermore, for any cardinal $\lambda$ consider the presheaf,
\[ L_\lambda(X) = \{ \text{locally constant } f : X \to \lambda \} \]
Sending cardinals less than $\lambda$ to themselves and others to zero we get a map,
\[ F \to L_\lambda \]
For each $X$ we have argued that $F(X) \to L_\lambda(X)$ is injective. Now $L_\lambda$ is a sheaf. Indeed, it is represented by $\lambda$-copies of $\Spec{\Z}$. By the universal property we get,
\begin{center}
\begin{tikzcd}
F \arrow[rr] \arrow[rd] & & F_\lambda
\\
& G \arrow[ru, dashed] 
\end{tikzcd}
\end{center}
and $F(X) \embed F_\lambda(X)$ is injective for some $\lambda$ and thus $F \embed G$ is an injection. 
\bigskip\\
Let $f : U \to X$ be an fpqc cover. Then by the sheaf condition,
\begin{center}
\begin{tikzcd}
G(X) \arrow[r] & G(U) \arrow[r] & G(U \times_X U)
\\
F(X) \arrow[u, hook] \arrow[r] & F(U) \arrow[u, hook] \arrow[r] & F(U \times_X U) \arrow[u, hook]
\end{tikzcd}
\end{center}
where the top row is an equalizer. Now suppose that $X, U$ are fields. Then $\Spec{U}$ is a single point so the sets maps $U \times_X U \to U$ are set-theoretically the same. Thus $F(U)$ is the equalizer of the two maps $F(U) \to F(U \times_X U)$ and therefore $F(U) \to G(U)$ factors through $G(X) \to G(U)$ hence $F(U) \embed G(X)$. However, for a field $U = \Spec{K}$ we have $\# F(U) \ge \# K$ so for a fixed field $X$ we can take arbitrarily large cardinalities for $K$ and $F(U) \embed G(X)$ which contradicts that $G(X)$ is a set. 
\end{proof}

\begin{rmk}
How does this work if we had universes? The sheafification is basically a universe-sized colimit and so we would get that $G$ is universe-sized so if we changed the universe $G$ would increase unboundedly. Indeed, for a fixed cardinality $\lambda$ which is a universe, we just get that $G = F_\lambda$ since all schemes have residue fields bounded by $\lambda$ and alternatively we can always cover a scheme such that its residue fields are arbitrarily large. 
\end{rmk}

\section{$h$-Cobordism}

\begin{defn}
An $h$-cobordism between $n$-manifolds $M, N$ is a cobordism $W$ such that both inclusions $M \embed W$ and $N \embed W$ are homotopy equivalences. 
\end{defn}

\begin{rmk}
In particular, $M$ and $N$ are homotopy equivalent.
\end{rmk}

\begin{rmk}
Unlike other types of cobordisms, $h$-cobordism classes don't usually form a group. For oriented manifolds, there is a coboridsm $M \sqcup \overline{M}$ to $\empty$ by using a tube $M \times [0,1]$ with both boundary components thought of as the source of the cobordism. However, this is not an $h$-coborhism unless $M$ is contractible. 
\end{rmk}

\begin{theorem}[Smale]
Let $n \ge 5$ and $W$ a compact $(n+1)$-dimensional $h$-cobordism between $M$ and $N$ in $C = \mathbf{Diff}, \mathbf{PL}, \mathbf{Top}$ such that $W, M, N$ are simply-connected, then $W$ is $C$-trivial meaning isomorphic in $C$ to $M \times [0,1]$ rel boundary. In particular, $M$ and $N$ are isomorphic in $C$. 
\end{theorem}

\section{Spectral Norm}

Let $A$ be an $\RR$-algebra. Then we define the spectrum of $f \in A$ via,
\[ \sigma(f) = \{ \lambda \in \RR \mid f - \lambda \text{ is not invertible} \} \]

\begin{example}
If $A = C^{\infty}(M)$ then $\sigma(f) = \im{f}$. Indeed, $f - \lambda$ is invertible iff it is nonzero iff $\lambda \notin \im{f}$. 
\end{example}

\begin{example}
If $A$ is the ring of linear endomorphisms of a vectorspace $V$. Then $\sigma(\varphi)$ for $\varphi \in A$ is the set of eigenvectors. Indeed, $\varphi - \lambda$ is not invertible iff $\det{(\varphi - \lambda)} = 0$. 
\end{example}

\begin{example}
If $A$ is the ring of bounded linear endomorphism of a Banach space $V$ then $\sigma(T)$ is the spectrum which is a closed set. For a compact operator $T$ this is the closure of the set of eigenvalues.
\end{example}

\begin{defn}
The \textit{spectral norm} $|| f ||$ of an element $f \in A$ is defined as,
\[ || f || = \sup_{\lambda \in \sigma(f)} | \lambda | \]
\end{defn}

\section{Closed Points of Stacks}

Consider the stack $[\A^1 / \Gm]$. This has two points, an open point and a closed point with stabilizer $\Gm$. This means that any $\Spec{\CC} \to \A^1 \to [\A^1 / \Gm]$ which does not map through zero hits the open point. Weird!

What happens to the generic point. Well, it also maps to the open point. Indeed, we can see that $\Spec{K} \to \A^1 \to [\A^1 / \Gm]$ determines a map $(\Gm)_K \to \A^1$ given by the base change of the action to the generic point. This is isomorphic as a $K$-torsor with a map to $\A^1$ to the base change of the standard inclusion $\Gm \to \A^1$. Indeed, these two maps correspond to $k[t] \to K[t, t^{-1}]$ via either $t \mapsto 1 \ot t$ or $t \mapsto t \ot t$. However, these two maps are isomorphic over $K$ by just sending $1 \ot t$ to $t \ot t$, this is fine its just multiplying my an element of the field.
\bigskip\\
This sort of thing shows that in the stack of polarized varities there are many nonclosed $\CC$-points. For example, a conic degenerates to two lines but all conics are equal. This means the pair $(\P^1, \struct{}(2))$ is not closed. However, I think $(\P^1, \struct{}(1))$ is closed since it forms a closed orbit of the Hilbert scheme. I think the closed orbits of the $\PGL$-action on the Hilbert scheme will correspond to the closed points of the stack. Certainly, the open orbits correspond to open points since the map from the Hilbert scheme is a $\PGL$-torsor hence smooth so it is open. 
\bigskip\\
However, this does not endanger our argument that if we have an integral ft $k$-scheme $S$ with a map $f : S \to \X$ to a stack such that all closed points map to a single point $x \in |\X|$ then $f(|S|) = \{ x \}$. Indeed, it follows from the following lemma.

\begin{lemma}
Let $f : X \to Y$ a continuous map and $x_0 \rightsquigarrow x_1$ then $f(x_0) \rightsquigarrow f(x_1)$.
\end{lemma}

\begin{proof}
$x_1 \in \overline{ \{ x_0 \} }$ and thus $f(x_1) \in f(\overline{ \{ x_0 \}}) \subset \overline{\{ f(x_0) \}}$.
\end{proof}

Therefore, for any $s \in S$ we see that $f(x) \rightsquigarrow x$. However, also in $S$ the closed points are dense so $f(S) \subset \overline{f(S_{\text{closed}})} = \overline{ \{ x \} }$. However, if $\X$ is quasi-separated then $|\X|$ is sober (\chref{https://stacks.math.columbia.edu/tag/0DQQ}{Tag 0DQQ}) meaning that $x$ is the unique generic point of $\overline{ \{ x \} }$ and thus $f(s) = x$. This seems to not need Chevalley's theorem at all. 
\bigskip\\
Indeed, the stack of polarized schemes is quasi-separated by \chref{https://stacks.math.columbia.edu/tag/0DPU}{Tag 0DPU}. However, this does allow all but one closed points to map to $x$ and then the remaining closed point to map to $x'$ s.t. $x \spto x'$. In this case the generic points will still map to $x$. This is what happens when an isotrivial family degenerates for example.
\bigskip\\
The philosophy is that the open points have larger dimension since the points with large stabilizers have very negative dimension. In this sense, the closed special objects should be the ones with exceptionally large automorphism groups. For example, in polarized schemes, the locus with Hilbert polynomial $2 t + 1$ in $\P^2$ corresponds to $[\P^5 / \PGL_3]$. Now the orbits of $\PGL_3 \acts \P^5$ are,
\begin{enumerate}
\item a $5$-dimensional open corresponding to the smooth conics: $B \PGL_2$ with residual stabilizer $\PGL_2$ 

\item a $4$-dimensional locally closed corresponding to the union of two lines: $B (B_2 \times B_2)$ where $B_2 \subset \PGL_2$ is a borel 

\item a $2$-dimensional closed orbit corresponding to double lines: $B G$ where $G$ is the $6$-dimensional stabilizer group of a line in $\P^2$ under the $\PGL_3$-action which is an extension of $\PGL_2$ by an extension of $\Gm$ by $\A^2$ corresponding to the extra automorphisms arising automorphisms of the nilpotents. 
\end{enumerate}

\begin{rmk}
Let $X \subset \P^2$ be a double line. Then $\I_{X} = \struct{}(-2)$ and $\I_{X_{\red}} = \struct{}(-1)$ so the nilpotent sequence is,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \struct{X_{\red}}(-1) \arrow[r] & \struct{X} \arrow[r] & \struct{X_{\red}} \arrow[r] & 0
\end{tikzcd}
\end{center}
giving $H^0(X, \struct{X}) = k$ as expected from the ideal sheaf sequence on $\P^2$. However, there are more automorphisms that just $\PGL_2$ since the isomorphism $f^* \struct{X} \to \struct{X}$ is just a morphism of sheaves of $\CC$-algebras not of $\struct{X}$-modules. Since $f^* \struct{X} \cong \strut{X}$ abstractly and nilpotents must map to nilpotents we need to consider morphisms of diagrams,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \struct{X_{\red}}(-1) \arrow[d] \arrow[r] & \struct{X} \arrow[d] \arrow[r] & \struct{X_{\red}} \arrow[d, equals] \arrow[r] & 0
\\
0 \arrow[r] & \struct{X_{\red}}(-1) \arrow[r] & \struct{X} \arrow[r] & \struct{X_{\red}} \arrow[r] & 0
\end{tikzcd}
\end{center}
so the inner morphism is an isomorphism but it is not determined by the outer morphisms. We see that,
\[ \Hom{\text{Rings}}{\struct{X}}{\struct{X}} = \Hom{\struct{X}}{\Omega_{X}}{\struct{X_{\red}}(-1)} \]
and the conormal sequence gives,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \struct{X_{\red}}(-1) \arrow[r] & \Omega_{X} \arrow[r] & \Omega_{X_{\red}} \arrow[r] & 0
\end{tikzcd}
\end{center}
therefore we get a sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & H^1(\struct{X_{\red}}(1)) \arrow[r] & \Hom{\struct{X}}{\Omega_X}{\struct{X_{\red}}(-1)} \arrow[r] & H^1(\struct{X_{\red}}) \arrow[r] & \Ext{1}{\struct{X}}{\Omega_{X_{\red}}}{\struct{X_{\red}}(-1)}
\end{tikzcd}
\end{center}
and there is a base-change spectral sequence,
\[ E_2^{p,q} = \Ext{p}{\struct{X_{\red}}}{\Omega_{X_{\red}}}{\shExt{q}{\struct{X}}{\struct{X_{\red}}}{\F}} \implies \Ext{p+q}{\struct{X}}{\Omega_{X_{\red}}}{\F} \]
and we see that,
\[ \Ext{1}{\struct{X_{\red}}}{\Omega_{X_{\red}}}{\struct{X_{\red}}(-1)} = H^1(X_{\red}(1)) = 0 \]
and likewise,
\[ \shExt{1}{\struct{X}}{\struct{X_{\red}}}{\struct{X_{\red}}(-1)} = 0 \]
because the extension class of $\struct{X}$ is trivial so from the exact sequence,
\begin{center}
\begin{tikzcd}
\shExt{0}{\struct{X}}{\struct{X}}{\struct{X_{\red}}} \arrow[r, "\sim"] &  \shExt{0}{\struct{X}}{\struct{X_{\red}}(-1)}{\struct{X_{\red}}(-1)} \arrow[r] & \shExt{1}{\struct{X}}{\struct{X_{\red}}}{\struct{X_{\red}}(-1)} \arrow[r] & \shExt{1}{\struct{X}}{\struct{X}}{\struct{X_{\red}}(-1)}
\end{tikzcd}
\end{center}
and the last term is zero since $\struct{X}$ is locally free. Therefore, 
\[ \Ext{1}{\struct{X}}{\Omega_{X_{\red}}}{\struct{X_{\red}}(-1)} = 0 \]
which implies that,
\[ \dim \Hom{\struct{X}}{\Omega_X}{\struct{X_{\red}}(-1)} = \dim{H^1(\struct{X_{\red}}(1))} + \dim{H^1(\struct{X_{\red}})} = 3 \]
as expected. Therefore, there are $3 + 3 = 6$ dimensions of automorphism of $X$. 
\end{rmk}

\section{Some Topos Theory}

\subsection{Preliminaries}

\subsection{Cohomology}

\begin{defn}
Let $\E$ be a topos. Then there is a unique geometric morphism $\gamma : \E \to \S$ such that,
\[ \gamma^*(S) = \sum_{s \in S} 1 \quad \text{ and } \quad \gamma^*(E) = \Hom{\E}{1}{E} \]
We usually write $\Delta$ for $\gamma^*$ and $\Gamma$ for $\gamma_*$.
\end{defn}

\begin{rmk}
In a sheaf topos, this recovers the notions of constant sheaf and global sections.
\end{rmk}

\begin{defn}
Let $\E$ be a topos, write $\Ab(\E)$ for the abelian category of abelian group objects in $\E$. Then the global sections functor induces a left-exact (since it admits a left-adjoint $\Delta$) functor,
\[ \Gamma : \Ab(\E) \to \Ab \]
Define the cohomology groups as the right-derived functors,
\[ H^n(\E, A) = R^n \Gamma(A) \]
For any object $B \in \E$, we can define cohomology in the slice topos,
\[ H^n_{\E}(B, A) := H^n(\E_{/B}, B^*(A)) \]
where $B^* : \Ab(\E) \to \Ab(\E_{/B})$ is the base change functor $E \mapsto (E \times B \to B)$. 
\end{defn}

\begin{prop}
We have,
\[ \Ext{n}{\E}{B}{-} := R^n \Hom{\E}{B}{-} = R^n \Hom{\Ab(\E)}{\Z[B]}{-} = \Ext{n}{\Ab(\E)}{\Z[B]}{-} \]
Then,
\[ \Ext{n}{\E}{B}{-} = H^n(B, -) \]
\end{prop}

\begin{proof}
This is because,
\[ \Gamma(\E_{/B}, B^*(-)) = \Hom{\E_{/B}}{B}{B^*(-)} = \Hom{\E}{B}{-} \]
since $B$ is the terminal object of $\E_{/B}$. Where,
\[ \Z[B] = \bigoplus_{n \in \ZZ} B \]
in $\Ab(\E)$ is left-adjoint to $\Ab(\E) \embed \E$.
\end{proof}

\begin{example}
In a sheaf topos $\E$ on a site $\C$, the cohomology of a representable object $h^X$ is,
\[ H^n(h^X, A) = R^n \Hom{\E}{h^X}{A} = R^n \Gamma(X, A) = H^n(X, A) \]
is cohomology of $X$ in the usual sense of derived functors of $\Gamma(X, -)$. 
\end{example}

\begin{rmk}
However, there are sites $\C$ without a terminal object. In these sites, there isn't a representable ``global sections'' however, the topos $\E = \Sh(\C)$ has a global sections functor,
\[ \Gamma(\C, -) := \Hom{\E}{1}{-} \]
\end{rmk}

\begin{example}
The \etale or Zariski site of a nontrivial stack usually does not have a terminal object. For example, let $G$ be finite \etale group scheme over a base $S$. Then consider the stack $BG$ of $G$-tosors. The \etale site $(BG)_{\et}$ of $BG$ is the site of \etale maps $U \to BG$ from $k$-schemes equiped with \etale covers. Concretely, this is the category of pairs $(U, P)$ where $P$ is a $G$-torsor over $U$ and $U$ is an \etale $k$-scheme (the map $U \to BG$ being \etale is equivalent to $P \to S$ being \etale or equivalently $U \to S$ being \etale). The morphisms $(U, P) \to (U', P')$ are equivariant diagrams,
\begin{center}
\begin{tikzcd}
P \arrow[r] \arrow[d] & P' \arrow[d]
\\
U \arrow[r] & U'
\end{tikzcd}
\end{center}
These automatically make $P \iso U \times_{U'} P'$. There is no terminal object since there is no scheme with a universal $G$-torsor. This is why we needed to define the stack! Therefore, we need to define global sections as,
\[ \Gamma((BG)_{\et}, -) = \Hom{\Sh{(BG)_{\et}}}{1}{-} \]
meaning compatible choices of a section on every object of $(BG)_{\et}$. Let's compute,
\[ H^i((BG)_{\et}, \Z) \] 
(DO EXAMPLE!!!)
\end{example}


\subsection{Covers}

\begin{defn}
Let $f : \F \to \G$ be a morphism in a topos $\E$. Then $f$ is a \textit{cover} if $f$ is an epimorphism. We say that a family $\{ \F_\alpha \to \G \}$ is a cover if $\sqcup \F_\alpha \to \G$ is.
\end{defn}

\begin{defn}
A set $\{ X_\alpha \}$ of objects $X_\alpha \in \E$ is a \textit{cover} of $\E$ if the canonical maps $\{ X_\alpha \to 1 \}$ is a covering family.  
\end{defn}

\begin{prop}
The collection of covers forms a Grothendieck topology on any topos $\E$.
\end{prop}

\begin{proof}
We need to check the following axioms:
\begin{enumerate}
\item if $f : \G' \to \G$ is any morphism and $\{ \F_\alpha \to \G \}$ is a covering family then,
\begin{center}
\begin{tikzcd}
\F_\alpha' \arrow[r] \arrow[d] \arrow[d] \pullback & \F_\alpha \arrow[d]
\\
\G' \arrow[r] & \G
\end{tikzcd}
\end{center}
is a covering family. Indeed, pullbacks commute with coproducts (pullback is a left-adjoint by the existence of Power objects and hence preserves colimits) and preserve epimorphisms [SGL, Prop. 7.3]

\item if $\{ \F_\alpha \to \G \}$ is a covering family and $\{ \F_{\alpha \beta} \to \F_\alpha \}$ are covering families then $\{ \F_{\alpha \beta} \to \G \}$ is a covering family. This is just compatibility reindexing coproducts and that compositions of epis are epis

\item If $f : \F \to \G$ is an isomrophism then $f$ is an epi and hence a cover.
\end{enumerate}
\end{proof}

\begin{prop}
Let $\E = \Sh(\C)$ where $\C$ is a site. Then if $f : Y \to X$ is a morphism in $\C$ then,
\[ f : h^Y \to h^X \text{ is a cover } \iff f : Y \to X \text{ is refined by a cover } \]
\end{prop}

\begin{proof}
Suppose $f : h^Y \to h^X$ is an epimorphism. Then, for $\id \in h^X(X)$ there is a covering family $\{ U_\alpha \to X \}$ such that $\id|_{U_\alpha}$ which is $(U_\alpha \to X) \in h^X(U_\alpha)$ is in the image of $h^Y(U_\alpha) \to h^X(U_\alpha)$. Explicitly, this means there are maps,
\begin{center}
\begin{tikzcd}
& Y \arrow[d]
\\
U_\alpha \arrow[r] \arrow[ru] & X
\end{tikzcd}
\end{center}
so $X' \to X$ is refined by a cover. 
\bigskip\\
Conversely, if $f : X' \to X$ is refined by a cover then for any $T \to X$ we can base change to $T_{\alpha} \to U_\alpha$ so we get a cover $\{ T_\alpha \to T \}$ such that $T_\alpha \to T \to X$ factors through $T_\alpha \to U_\alpha \to Y$ meaning $h^Y \to h^X$ is an epimorphism. 
\end{proof}

\begin{rmk}
It may seem like this is enlarging the covering families too much. However, this is not true because the following lemma says we do not restrict our category of sheaves.
\end{rmk}

\begin{lemma}
Let $f : Y \to X$ be refined by a cover. Then any sheaf $\F$ on $\C$ satisfies the sheaf condition for $f$.
\end{lemma}

\begin{proof}
This is standard, see Stacks (2022) notes.
\end{proof}

\subsection{Hypercovers}


Now we want to define hypercovers internal to the topos. (DO THIS DEFINITION!!) Verdier!

\begin{proof}

\end{proof}

\subsection{Quasi-Coherent Sheaves}

\begin{defn}
Let $(\E, \struct{\E})$ be a ringed topos. Then we say a $\struct{\E}$-module $\F \in \E$ is \textit{quasi-coherent} if there exists a cover $\{ U_i \}$ of $\E$.
\end{defn}



\end{document}